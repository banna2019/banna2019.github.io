<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>搭建Verdaccio-npm本地仓库 | Bruce Blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.5e022b62.css" as="style"><link rel="preload" href="/assets/js/app.8758b392.js" as="script"><link rel="preload" href="/assets/js/3.9d37e447.js" as="script"><link rel="preload" href="/assets/js/2.f0782796.js" as="script"><link rel="preload" href="/assets/js/198.9c3c0526.js" as="script"><link rel="prefetch" href="/assets/js/1.c38d7d98.js"><link rel="prefetch" href="/assets/js/10.1da00e07.js"><link rel="prefetch" href="/assets/js/100.bc860420.js"><link rel="prefetch" href="/assets/js/101.0c5e1243.js"><link rel="prefetch" href="/assets/js/102.bfc1ee56.js"><link rel="prefetch" href="/assets/js/103.ede346d4.js"><link rel="prefetch" href="/assets/js/104.2e1c7aa8.js"><link rel="prefetch" href="/assets/js/105.f5129283.js"><link rel="prefetch" href="/assets/js/106.e054a954.js"><link rel="prefetch" href="/assets/js/107.a4955aea.js"><link rel="prefetch" href="/assets/js/108.3d7369ec.js"><link rel="prefetch" href="/assets/js/109.3348fc7f.js"><link rel="prefetch" href="/assets/js/11.622b4040.js"><link rel="prefetch" href="/assets/js/110.f0ba3b3f.js"><link rel="prefetch" href="/assets/js/111.05e33977.js"><link rel="prefetch" href="/assets/js/112.ab07180a.js"><link rel="prefetch" href="/assets/js/113.5fdcf7f1.js"><link rel="prefetch" href="/assets/js/114.a7596bbc.js"><link rel="prefetch" href="/assets/js/115.3c61f99a.js"><link rel="prefetch" href="/assets/js/116.e160f659.js"><link rel="prefetch" href="/assets/js/117.18409927.js"><link rel="prefetch" href="/assets/js/118.b6fe33e1.js"><link rel="prefetch" href="/assets/js/119.7521e2a7.js"><link rel="prefetch" href="/assets/js/12.fd133560.js"><link rel="prefetch" href="/assets/js/120.5526efb3.js"><link rel="prefetch" href="/assets/js/121.6cb7b613.js"><link rel="prefetch" href="/assets/js/122.ad21d723.js"><link rel="prefetch" href="/assets/js/123.868f8c94.js"><link rel="prefetch" href="/assets/js/124.8d2f9db2.js"><link rel="prefetch" href="/assets/js/125.e4848220.js"><link rel="prefetch" href="/assets/js/126.085c8013.js"><link rel="prefetch" href="/assets/js/127.981d64b6.js"><link rel="prefetch" href="/assets/js/128.032529c6.js"><link rel="prefetch" href="/assets/js/129.18f95003.js"><link rel="prefetch" href="/assets/js/13.c7b05016.js"><link rel="prefetch" href="/assets/js/130.0ad0244a.js"><link rel="prefetch" href="/assets/js/131.0df82517.js"><link rel="prefetch" href="/assets/js/132.d1a7718c.js"><link rel="prefetch" href="/assets/js/133.c1de59c3.js"><link rel="prefetch" href="/assets/js/134.6582ee6c.js"><link rel="prefetch" href="/assets/js/135.330fb27f.js"><link rel="prefetch" href="/assets/js/136.269906de.js"><link rel="prefetch" href="/assets/js/137.7de41195.js"><link rel="prefetch" href="/assets/js/138.a83f3198.js"><link rel="prefetch" href="/assets/js/139.d8c09be1.js"><link rel="prefetch" href="/assets/js/14.57868965.js"><link rel="prefetch" href="/assets/js/140.7c94180f.js"><link rel="prefetch" href="/assets/js/141.51a2a4e2.js"><link rel="prefetch" href="/assets/js/142.2af9bc92.js"><link rel="prefetch" href="/assets/js/143.938fa7a9.js"><link rel="prefetch" href="/assets/js/144.22bb4a74.js"><link rel="prefetch" href="/assets/js/145.80fdb8ca.js"><link rel="prefetch" href="/assets/js/146.41d1bb74.js"><link rel="prefetch" href="/assets/js/147.3fc392ee.js"><link rel="prefetch" href="/assets/js/148.0337c3fd.js"><link rel="prefetch" href="/assets/js/149.f02f04ed.js"><link rel="prefetch" href="/assets/js/15.d5e623b4.js"><link rel="prefetch" href="/assets/js/150.86a0819c.js"><link rel="prefetch" href="/assets/js/151.55ab45e1.js"><link rel="prefetch" href="/assets/js/152.94843a87.js"><link rel="prefetch" href="/assets/js/153.cd0436cf.js"><link rel="prefetch" href="/assets/js/154.cb1f192d.js"><link rel="prefetch" href="/assets/js/155.02ee03ff.js"><link rel="prefetch" href="/assets/js/156.4efa355b.js"><link rel="prefetch" href="/assets/js/157.3aa8e22d.js"><link rel="prefetch" href="/assets/js/158.605bb04f.js"><link rel="prefetch" href="/assets/js/159.755884c1.js"><link rel="prefetch" href="/assets/js/16.4678dc4c.js"><link rel="prefetch" href="/assets/js/160.4d28e3bf.js"><link rel="prefetch" href="/assets/js/161.46d157af.js"><link rel="prefetch" href="/assets/js/162.05a57e42.js"><link rel="prefetch" href="/assets/js/163.c9909d48.js"><link rel="prefetch" href="/assets/js/164.5e900797.js"><link rel="prefetch" href="/assets/js/165.c66866f1.js"><link rel="prefetch" href="/assets/js/166.00dab62f.js"><link rel="prefetch" href="/assets/js/167.c6445135.js"><link rel="prefetch" href="/assets/js/168.250c0ed3.js"><link rel="prefetch" href="/assets/js/169.359ef15e.js"><link rel="prefetch" href="/assets/js/17.06e1a34f.js"><link rel="prefetch" href="/assets/js/170.7c12bc47.js"><link rel="prefetch" href="/assets/js/171.4e5246e9.js"><link rel="prefetch" href="/assets/js/172.30e727af.js"><link rel="prefetch" href="/assets/js/173.129914de.js"><link rel="prefetch" href="/assets/js/174.5225a3ab.js"><link rel="prefetch" href="/assets/js/175.abb78f02.js"><link rel="prefetch" href="/assets/js/176.ee009d84.js"><link rel="prefetch" href="/assets/js/177.4d78fe8b.js"><link rel="prefetch" href="/assets/js/178.3632b48d.js"><link rel="prefetch" href="/assets/js/179.ad2901ca.js"><link rel="prefetch" href="/assets/js/18.ff7ceec2.js"><link rel="prefetch" href="/assets/js/180.ccbfe2ee.js"><link rel="prefetch" href="/assets/js/181.b2571b52.js"><link rel="prefetch" href="/assets/js/182.3163373a.js"><link rel="prefetch" href="/assets/js/183.b4396816.js"><link rel="prefetch" href="/assets/js/184.61459cff.js"><link rel="prefetch" href="/assets/js/185.f69d99cd.js"><link rel="prefetch" href="/assets/js/186.5bb68f88.js"><link rel="prefetch" href="/assets/js/187.298e841f.js"><link rel="prefetch" href="/assets/js/188.98e33d29.js"><link rel="prefetch" href="/assets/js/189.d1f66a43.js"><link rel="prefetch" href="/assets/js/19.84b0c399.js"><link rel="prefetch" href="/assets/js/190.8ca0d707.js"><link rel="prefetch" href="/assets/js/191.df5abe84.js"><link rel="prefetch" href="/assets/js/192.fb6cc1ad.js"><link rel="prefetch" href="/assets/js/193.33395a87.js"><link rel="prefetch" href="/assets/js/194.085b2479.js"><link rel="prefetch" href="/assets/js/195.0eba2458.js"><link rel="prefetch" href="/assets/js/196.5389d8fc.js"><link rel="prefetch" href="/assets/js/197.8acf063d.js"><link rel="prefetch" href="/assets/js/199.04f12414.js"><link rel="prefetch" href="/assets/js/20.638e6d94.js"><link rel="prefetch" href="/assets/js/200.608aeb2d.js"><link rel="prefetch" href="/assets/js/201.ca8deb78.js"><link rel="prefetch" href="/assets/js/202.9edd7848.js"><link rel="prefetch" href="/assets/js/203.00d0ce9e.js"><link rel="prefetch" href="/assets/js/204.131edf2d.js"><link rel="prefetch" href="/assets/js/205.3129980e.js"><link rel="prefetch" href="/assets/js/206.72fca046.js"><link rel="prefetch" href="/assets/js/207.79ee03e2.js"><link rel="prefetch" href="/assets/js/208.8ecfd77b.js"><link rel="prefetch" href="/assets/js/209.4f9a2d40.js"><link rel="prefetch" href="/assets/js/21.79fe3547.js"><link rel="prefetch" href="/assets/js/210.af1d73d6.js"><link rel="prefetch" href="/assets/js/211.dafb72f3.js"><link rel="prefetch" href="/assets/js/212.8197207f.js"><link rel="prefetch" href="/assets/js/22.e980d4b5.js"><link rel="prefetch" href="/assets/js/23.37d95d4c.js"><link rel="prefetch" href="/assets/js/24.f3e2c9f4.js"><link rel="prefetch" href="/assets/js/25.38870812.js"><link rel="prefetch" href="/assets/js/26.ce68d7dc.js"><link rel="prefetch" href="/assets/js/27.0b7e7553.js"><link rel="prefetch" href="/assets/js/28.4f1734f7.js"><link rel="prefetch" href="/assets/js/29.88d32652.js"><link rel="prefetch" href="/assets/js/30.eb421598.js"><link rel="prefetch" href="/assets/js/31.edcf1815.js"><link rel="prefetch" href="/assets/js/32.522a0999.js"><link rel="prefetch" href="/assets/js/33.c173aee1.js"><link rel="prefetch" href="/assets/js/34.9fbbcdd3.js"><link rel="prefetch" href="/assets/js/35.b5f45fc6.js"><link rel="prefetch" href="/assets/js/36.b0f595bc.js"><link rel="prefetch" href="/assets/js/37.24026958.js"><link rel="prefetch" href="/assets/js/38.7847f254.js"><link rel="prefetch" href="/assets/js/39.23b2bcfc.js"><link rel="prefetch" href="/assets/js/4.00094fbf.js"><link rel="prefetch" href="/assets/js/40.ff01ed72.js"><link rel="prefetch" href="/assets/js/41.ae4a4f2d.js"><link rel="prefetch" href="/assets/js/42.4616d344.js"><link rel="prefetch" href="/assets/js/43.0b83d713.js"><link rel="prefetch" href="/assets/js/44.78078c16.js"><link rel="prefetch" href="/assets/js/45.3e3ab463.js"><link rel="prefetch" href="/assets/js/46.67207ecb.js"><link rel="prefetch" href="/assets/js/47.6d8b9b59.js"><link rel="prefetch" href="/assets/js/48.7e8e9a84.js"><link rel="prefetch" href="/assets/js/49.3f49f17c.js"><link rel="prefetch" href="/assets/js/5.852adee4.js"><link rel="prefetch" href="/assets/js/50.49a43dde.js"><link rel="prefetch" href="/assets/js/51.e5b2d796.js"><link rel="prefetch" href="/assets/js/52.a73570e7.js"><link rel="prefetch" href="/assets/js/53.f23c5ef8.js"><link rel="prefetch" href="/assets/js/54.0927b702.js"><link rel="prefetch" href="/assets/js/55.41145337.js"><link rel="prefetch" href="/assets/js/56.b1b331e2.js"><link rel="prefetch" href="/assets/js/57.996c8475.js"><link rel="prefetch" href="/assets/js/58.8becd9cf.js"><link rel="prefetch" href="/assets/js/59.98c9fbc3.js"><link rel="prefetch" href="/assets/js/6.caa8eb52.js"><link rel="prefetch" href="/assets/js/60.2a37908c.js"><link rel="prefetch" href="/assets/js/61.b4ba2984.js"><link rel="prefetch" href="/assets/js/62.d2dabf00.js"><link rel="prefetch" href="/assets/js/63.d8afe704.js"><link rel="prefetch" href="/assets/js/64.69e5f2af.js"><link rel="prefetch" href="/assets/js/65.f5cc9fbb.js"><link rel="prefetch" href="/assets/js/66.342a5783.js"><link rel="prefetch" href="/assets/js/67.613fd26b.js"><link rel="prefetch" href="/assets/js/68.737b025e.js"><link rel="prefetch" href="/assets/js/69.fd0a4938.js"><link rel="prefetch" href="/assets/js/70.644b9017.js"><link rel="prefetch" href="/assets/js/71.a4bb82a0.js"><link rel="prefetch" href="/assets/js/72.dc9a22fb.js"><link rel="prefetch" href="/assets/js/73.2d91d8a0.js"><link rel="prefetch" href="/assets/js/74.d488f274.js"><link rel="prefetch" href="/assets/js/75.0ae18fbf.js"><link rel="prefetch" href="/assets/js/76.59362548.js"><link rel="prefetch" href="/assets/js/77.b0672fe0.js"><link rel="prefetch" href="/assets/js/78.c435b12e.js"><link rel="prefetch" href="/assets/js/79.167b2c28.js"><link rel="prefetch" href="/assets/js/80.edd44ba1.js"><link rel="prefetch" href="/assets/js/81.1cbef03a.js"><link rel="prefetch" href="/assets/js/82.a05151cb.js"><link rel="prefetch" href="/assets/js/83.29fa2be8.js"><link rel="prefetch" href="/assets/js/84.8a0005fd.js"><link rel="prefetch" href="/assets/js/85.51d3719a.js"><link rel="prefetch" href="/assets/js/86.87a5c379.js"><link rel="prefetch" href="/assets/js/87.31d7b4e8.js"><link rel="prefetch" href="/assets/js/88.233deb38.js"><link rel="prefetch" href="/assets/js/89.ca389f69.js"><link rel="prefetch" href="/assets/js/9.3b29bc18.js"><link rel="prefetch" href="/assets/js/90.47900d68.js"><link rel="prefetch" href="/assets/js/91.5026d797.js"><link rel="prefetch" href="/assets/js/92.81a60178.js"><link rel="prefetch" href="/assets/js/93.8d0c8831.js"><link rel="prefetch" href="/assets/js/94.909d53e5.js"><link rel="prefetch" href="/assets/js/95.b8164559.js"><link rel="prefetch" href="/assets/js/96.04a6d2dc.js"><link rel="prefetch" href="/assets/js/97.70aed47f.js"><link rel="prefetch" href="/assets/js/98.4b022cd2.js"><link rel="prefetch" href="/assets/js/99.b64f3c7f.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.2cbf961d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5e022b62.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Bruce Blog" class="logo"> <span class="site-name can-hide">Bruce Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><a href="/Linux/" class="link-title">Linux</a> <span class="title" style="display:none;">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/78ac47/" class="nav-link">CentOS</a></li><li class="dropdown-item"><!----> <a href="/pages/03b439/" class="nav-link">Ubuntu-Debian</a></li><li class="dropdown-item"><!----> <a href="/pages/944ad5/" class="nav-link">系统网络</a></li><li class="dropdown-item"><!----> <a href="/pages/ok458awq/" class="nav-link">系统辅助工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DB" class="dropdown-title"><a href="/DB/" class="link-title">DB</a> <span class="title" style="display:none;">DB</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c01dc5/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/pages/c8fd91/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/b273d5/" class="nav-link">Mongodb</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Containers" class="dropdown-title"><a href="/Containers/" class="link-title">Containers</a> <span class="title" style="display:none;">Containers</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/efcac1/" class="nav-link">Docker基础</a></li><li class="dropdown-item"><!----> <a href="/pages/c8b80a/" class="nav-link">Container基础</a></li><li class="dropdown-item"><h4>Kubernetes</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8f543a/" class="nav-link">Kubernetes基础</a></li><li class="dropdown-subitem"><a href="/pages/8f543b/" class="nav-link">Kubernetes辅助</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/7281d1/" class="nav-link">Container-Network</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CICD" class="dropdown-title"><a href="/CICD/" class="link-title">CICD</a> <span class="title" style="display:none;">CICD</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/t40st87288kbhp36/" class="nav-link">Jenkins</a></li><li class="dropdown-item"><!----> <a href="/pages/a5ynywy5m02wa711/" class="nav-link">Gitlab</a></li><li class="dropdown-item"><!----> <a href="/pages/a5ynywy5m02wa811/" class="nav-link">ArgoCD</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Cloud" class="dropdown-title"><a href="/Cloud/" class="link-title">Cloud</a> <span class="title" style="display:none;">Cloud</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/d4cc0b/" class="nav-link">Ansible</a></li><li class="dropdown-item"><!----> <a href="/pages/268dd9/" class="nav-link">Terraform</a></li><li class="dropdown-item"><!----> <a href="/pages/2e807e/" class="nav-link">AWS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Middleware" class="dropdown-title"><a href="/Middleware/" class="link-title">Middleware</a> <span class="title" style="display:none;">Middleware</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/623a90/" class="nav-link">MQ</a></li><li class="dropdown-item"><!----> <a href="/pages/482240/" class="nav-link">NGINX</a></li><li class="dropdown-item"><!----> <a href="/pages/e58360/" class="nav-link">JumpServer</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/Python" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c5ac48/" class="nav-link">基础</a></li><li class="dropdown-item"><!----> <a href="/pages/9aceb6/" class="nav-link">函数模块</a></li><li class="dropdown-item"><!----> <a href="/pages/2d5786/" class="nav-link">框架</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Golang" class="dropdown-title"><a href="/Golang/" class="link-title">Golang</a> <span class="title" style="display:none;">Golang</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b1984c/" class="nav-link">Golang环境</a></li><li class="dropdown-subitem"><a href="/pages/0ce21b/" class="nav-link">语法</a></li><li class="dropdown-subitem"><a href="/pages/428a94/" class="nav-link">数据类型与运算符</a></li><li class="dropdown-subitem"><a href="/pages/1d4b8d/" class="nav-link">分支语句</a></li><li class="dropdown-subitem"><a href="/pages/5e86ab/" class="nav-link">循环语句</a></li><li class="dropdown-subitem"><a href="/pages/95d8ab/" class="nav-link">数组</a></li><li class="dropdown-subitem"><a href="/pages/ac9edc/" class="nav-link">切片</a></li><li class="dropdown-subitem"><a href="/pages/29f4a8/" class="nav-link">Map</a></li><li class="dropdown-subitem"><a href="/pages/4d9645/" class="nav-link">String</a></li><li class="dropdown-subitem"><a href="/pages/bcd977/" class="nav-link">函数</a></li><li class="dropdown-subitem"><a href="/pages/7786c8/" class="nav-link">包的管理</a></li><li class="dropdown-subitem"><a href="/pages/d042db/" class="nav-link">指针</a></li><li class="dropdown-subitem"><a href="/pages/fda8e1/" class="nav-link">结构体</a></li><li class="dropdown-subitem"><a href="/pages/4fcd66/" class="nav-link">Go语言中的OOP</a></li><li class="dropdown-subitem"><a href="/pages/683080/" class="nav-link">方法和接口</a></li><li class="dropdown-subitem"><a href="/pages/e52d33/" class="nav-link">错误处理</a></li></ul></li><li class="dropdown-item"><h4>Go进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/37ec25/" class="nav-link">Go进阶</a></li></ul></li><li class="dropdown-item"><h4>Go框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/74b20e/" class="nav-link">Go框架</a></li></ul></li><li class="dropdown-item"><h4>Golang辅助</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/n7wdy2yv/" class="nav-link">Golang辅助</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front" class="dropdown-title"><a href="/Front/" class="link-title">Front</a> <span class="title" style="display:none;">Front</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a185if5y/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/g280oliz/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/1i458isb/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/pages/bow8jbqd/" class="nav-link">前端辅助</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Windows" class="dropdown-title"><a href="/Windows/" class="link-title">Windows</a> <span class="title" style="display:none;">Windows</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c26577/" class="nav-link">常用命令</a></li><li class="dropdown-item"><!----> <a href="/pages/4740de/" class="nav-link">性能监控工具</a></li><li class="dropdown-item"><!----> <a href="/pages/94106d/" class="nav-link">Windows下Docker使用</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/Other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3df950/" class="nav-link">日常学习</a></li><li class="dropdown-item"><!----> <a href="/pages/dd762a/" class="nav-link">其他导航</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/logo.png"> <div class="blogger-info"><h3>Bruce Tao</h3> <span>运维界的该溜子</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Linux" class="dropdown-title"><a href="/Linux/" class="link-title">Linux</a> <span class="title" style="display:none;">Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/78ac47/" class="nav-link">CentOS</a></li><li class="dropdown-item"><!----> <a href="/pages/03b439/" class="nav-link">Ubuntu-Debian</a></li><li class="dropdown-item"><!----> <a href="/pages/944ad5/" class="nav-link">系统网络</a></li><li class="dropdown-item"><!----> <a href="/pages/ok458awq/" class="nav-link">系统辅助工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DB" class="dropdown-title"><a href="/DB/" class="link-title">DB</a> <span class="title" style="display:none;">DB</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c01dc5/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/pages/c8fd91/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/b273d5/" class="nav-link">Mongodb</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Containers" class="dropdown-title"><a href="/Containers/" class="link-title">Containers</a> <span class="title" style="display:none;">Containers</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/efcac1/" class="nav-link">Docker基础</a></li><li class="dropdown-item"><!----> <a href="/pages/c8b80a/" class="nav-link">Container基础</a></li><li class="dropdown-item"><h4>Kubernetes</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8f543a/" class="nav-link">Kubernetes基础</a></li><li class="dropdown-subitem"><a href="/pages/8f543b/" class="nav-link">Kubernetes辅助</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/7281d1/" class="nav-link">Container-Network</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CICD" class="dropdown-title"><a href="/CICD/" class="link-title">CICD</a> <span class="title" style="display:none;">CICD</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/t40st87288kbhp36/" class="nav-link">Jenkins</a></li><li class="dropdown-item"><!----> <a href="/pages/a5ynywy5m02wa711/" class="nav-link">Gitlab</a></li><li class="dropdown-item"><!----> <a href="/pages/a5ynywy5m02wa811/" class="nav-link">ArgoCD</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Cloud" class="dropdown-title"><a href="/Cloud/" class="link-title">Cloud</a> <span class="title" style="display:none;">Cloud</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/d4cc0b/" class="nav-link">Ansible</a></li><li class="dropdown-item"><!----> <a href="/pages/268dd9/" class="nav-link">Terraform</a></li><li class="dropdown-item"><!----> <a href="/pages/2e807e/" class="nav-link">AWS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Middleware" class="dropdown-title"><a href="/Middleware/" class="link-title">Middleware</a> <span class="title" style="display:none;">Middleware</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/623a90/" class="nav-link">MQ</a></li><li class="dropdown-item"><!----> <a href="/pages/482240/" class="nav-link">NGINX</a></li><li class="dropdown-item"><!----> <a href="/pages/e58360/" class="nav-link">JumpServer</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/Python" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c5ac48/" class="nav-link">基础</a></li><li class="dropdown-item"><!----> <a href="/pages/9aceb6/" class="nav-link">函数模块</a></li><li class="dropdown-item"><!----> <a href="/pages/2d5786/" class="nav-link">框架</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Golang" class="dropdown-title"><a href="/Golang/" class="link-title">Golang</a> <span class="title" style="display:none;">Golang</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b1984c/" class="nav-link">Golang环境</a></li><li class="dropdown-subitem"><a href="/pages/0ce21b/" class="nav-link">语法</a></li><li class="dropdown-subitem"><a href="/pages/428a94/" class="nav-link">数据类型与运算符</a></li><li class="dropdown-subitem"><a href="/pages/1d4b8d/" class="nav-link">分支语句</a></li><li class="dropdown-subitem"><a href="/pages/5e86ab/" class="nav-link">循环语句</a></li><li class="dropdown-subitem"><a href="/pages/95d8ab/" class="nav-link">数组</a></li><li class="dropdown-subitem"><a href="/pages/ac9edc/" class="nav-link">切片</a></li><li class="dropdown-subitem"><a href="/pages/29f4a8/" class="nav-link">Map</a></li><li class="dropdown-subitem"><a href="/pages/4d9645/" class="nav-link">String</a></li><li class="dropdown-subitem"><a href="/pages/bcd977/" class="nav-link">函数</a></li><li class="dropdown-subitem"><a href="/pages/7786c8/" class="nav-link">包的管理</a></li><li class="dropdown-subitem"><a href="/pages/d042db/" class="nav-link">指针</a></li><li class="dropdown-subitem"><a href="/pages/fda8e1/" class="nav-link">结构体</a></li><li class="dropdown-subitem"><a href="/pages/4fcd66/" class="nav-link">Go语言中的OOP</a></li><li class="dropdown-subitem"><a href="/pages/683080/" class="nav-link">方法和接口</a></li><li class="dropdown-subitem"><a href="/pages/e52d33/" class="nav-link">错误处理</a></li></ul></li><li class="dropdown-item"><h4>Go进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/37ec25/" class="nav-link">Go进阶</a></li></ul></li><li class="dropdown-item"><h4>Go框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/74b20e/" class="nav-link">Go框架</a></li></ul></li><li class="dropdown-item"><h4>Golang辅助</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/n7wdy2yv/" class="nav-link">Golang辅助</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front" class="dropdown-title"><a href="/Front/" class="link-title">Front</a> <span class="title" style="display:none;">Front</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a185if5y/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/g280oliz/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/1i458isb/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/pages/bow8jbqd/" class="nav-link">前端辅助</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Windows" class="dropdown-title"><a href="/Windows/" class="link-title">Windows</a> <span class="title" style="display:none;">Windows</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c26577/" class="nav-link">常用命令</a></li><li class="dropdown-item"><!----> <a href="/pages/4740de/" class="nav-link">性能监控工具</a></li><li class="dropdown-item"><!----> <a href="/pages/94106d/" class="nav-link">Windows下Docker使用</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/Other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3df950/" class="nav-link">日常学习</a></li><li class="dropdown-item"><!----> <a href="/pages/dd762a/" class="nav-link">其他导航</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端辅助</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/bow8jbqd/" class="sidebar-link">前端辅助日常记录</a></li><li><a href="/pages/076d1a/" class="sidebar-link">NVM安装配置</a></li><li><a href="/pages/e6db53/" class="sidebar-link">NPM国内加速,修改镜像源</a></li><li><a href="/pages/ca370d/" aria-current="page" class="active sidebar-link">搭建Verdaccio-npm本地仓库</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/Front/#Front" data-v-06225672>Front</a></li><li data-v-06225672><a href="/Front/#前端辅助" data-v-06225672>前端辅助</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/banna2019" target="_blank" title="作者" class="beLink" data-v-06225672>Bruce</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-12-19</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">搭建Verdaccio-npm本地仓库<!----></h1>  <div class="theme-vdoing-content content__default"><h3 id="一、搭建verdaccio-npm私服"><a href="#一、搭建verdaccio-npm私服" class="header-anchor">#</a> 一、搭建<code>Verdaccio NPM</code>私服</h3> <ul><li><a href="https://github.com/verdaccio/verdaccio" target="_blank" rel="noopener noreferrer">Verdaccio-GitHub地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://verdaccio.org/zh-CN/" target="_blank" rel="noopener noreferrer">Verdaccio-中文文档地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><img src="https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219151307229.png" alt="image-20221219151307229"></p> <h3 id="二、npm私服是什么"><a href="#二、npm私服是什么" class="header-anchor">#</a> 二、<code>npm</code>私服是什么</h3> <ul><li>在自己的服务器上部署一个支持发布、下载、版本管理等服务的npm仓库就是npm私服,也叫<strong>私有化部署npm</strong></li></ul> <p><img src="https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219151327674.png" alt="image-20221219151327674"></p> <ul><li><p>因为国内下载<code>npm</code>包特别慢甚至下载失败，所以安装完<code>node.js</code>还要设置镜像源，镜像源就属于私服的一种</p> <blockquote><p>镜像源: 是以一定频率定时同步`npm``官方仓库，以此代替官方仓库，提高包下载速度</p></blockquote></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://npmmirror.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>淘宝镜像源 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fnpmmirror.com" target="_blank" rel="noopener noreferrer">npmmirror.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>腾讯镜像源 <a href="https://link.juejin.cn/?target=http%3A%2F%2Fmirrors.cloud.tencent.com%2Fnpm%2F" target="_blank" rel="noopener noreferrer">mirrors.cloud.tencent.com/npm/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>华为镜像源 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fmirrors.huaweicloud.com%2Frepository%2Fnpm%2F" target="_blank" rel="noopener noreferrer">mirrors.huaweicloud.com/repository/…<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="有了镜像源为什么还需要npm私服"><a href="#有了镜像源为什么还需要npm私服" class="header-anchor">#</a> <strong>有了镜像源为什么还需要<code>npm</code>私服？</strong></h4> <ul><li>1.镜像源解决了国内下载速度的问题，但是不能发包</li> <li>2.私有组件库，又不希望在网上公开，如何管理代码？</li> <li>3.在每个项目里复制一遍，但是当组件修改了代码，就需要重新复制一遍， 带来的维护成本太高</li></ul> <p><strong>此时就需要<code>npm</code>私服</strong></p> <h3 id="三、npm私服有什么用"><a href="#三、npm私服有什么用" class="header-anchor">#</a> 三、<code>npm</code>私服有什么用</h3> <h4 id="发布私有包"><a href="#发布私有包" class="header-anchor">#</a> 发布私有包</h4> <ul><li>私服最重要的功能就是发布私有包，既能保证代码不公开又能享受<code>npm</code>安装的快捷</li></ul> <p><strong>例如</strong></p> <ul><li>在开发中通常会把一些方法封装成 <code>utils.js</code>，在项目初始化时复制一份</li> <li>有了私服后就可以发一个 <code>myUtils</code> 包，然后通过 <code>npm install myUtils</code> 来安装</li> <li>通过修改版本号就能快速更新包</li></ul> <h4 id="链接npm仓库"><a href="#链接npm仓库" class="header-anchor">#</a> 链接<code>npm</code>仓库</h4> <p>在一个项目中使用多个仓库下载包时，可以配置 <code>.npmrc</code> 指定下载地址</p> <ul><li><code>vue</code> 包从淘宝镜像源下载</li> <li><code>myUtils</code> 包从私服下载</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>.npmrc<span class="token variable"><span class="token variable">`</span> 需要配置两个包的下载地址，还要在 <span class="token variable">`</span></span>package.json<span class="token variable"><span class="token variable">`</span> 中将私有包 <span class="token variable">`</span></span>myUtils<span class="token variable"><span class="token variable">`</span> 加上组织名 <span class="token variable">`</span></span>@sf/myUtils
<span class="token comment"># 淘宝镜像源</span>
<span class="token assign-left variable">registry</span><span class="token operator">=</span>https://npmmirror.com
<span class="token comment"># 私有源</span>
@sf:registry<span class="token operator">=</span>http://<span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>其他项目组有自己的仓库的情况下，又要用到它们的包，只好再次修改 <code>.npmrc</code></p></blockquote> <p><strong>解决办法</strong></p> <ul><li>使用私服的仓库链接功能(上行链路)，就可以把多个仓库聚合成一个下载入口</li> <li>上面的例子 <code>.npmrc</code> 只需要配置一个私服的地址 <code>registry=http://...</code></li> <li>省事省力</li></ul> <p><img src="https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219152426755.png" alt="image-20221219152426755"></p> <h4 id="提高下载速度"><a href="#提高下载速度" class="header-anchor">#</a> 提高下载速度</h4> <ul><li><p>通过私服下载的包会缓存到服务器中</p></li> <li><p>下载同一个包(同组织/名/版本)时优先从缓存中读取，找不到再从镜像或官方仓库下载</p> <blockquote><p>缓存策略可配置存储空间大小，保存周期等</p></blockquote></li></ul> <h3 id="四、私服方案"><a href="#四、私服方案" class="header-anchor">#</a> 四、私服方案</h3> <h4 id="开源免费"><a href="#开源免费" class="header-anchor">#</a> 开源免费</h4> <table><thead><tr><th>方案</th> <th>支持仓库</th> <th>star数</th> <th>github</th> <th>开发语言</th> <th>更新频率</th></tr></thead> <tbody><tr><td><code>Nexus</code>开源版</td> <td>maven，npm，docker，pypi...</td> <td><code>1.2k</code></td> <td><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fsonatype%2Fnexus-public" target="_blank" rel="noopener noreferrer">nexus-public<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td><code>Java</code></td> <td>高</td></tr> <tr><td><code>Sinopia</code></td> <td>npm</td> <td><code>5.5k</code></td> <td><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Frlidwka%2Fsinopia" target="_blank" rel="noopener noreferrer">sinopia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td><code>JavaScript</code></td> <td>停止更新</td></tr> <tr><td><code>Verdaccio</code></td> <td>npm</td> <td><code>13.7k</code></td> <td><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fverdaccio%2Fverdaccio" target="_blank" rel="noopener noreferrer">verdaccio<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td><code>JavaScript</code></td> <td>高</td></tr> <tr><td><code>cnpm.org</code></td> <td>npm</td> <td><code>3.6k</code></td> <td><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fcnpm%2Fcnpmjs.org" target="_blank" rel="noopener noreferrer">cnpmjs.org<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td><code>JavaScript</code></td> <td>停止更新</td></tr> <tr><td><code>cnpmcore</code></td> <td>npm</td> <td><code>&lt; 500</code></td> <td><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fcnpm%2Fcnpmcore" target="_blank" rel="noopener noreferrer">cnpmcore<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td><code>TypeScript</code></td> <td>高</td></tr></tbody></table> <ul><li><strong><code>Sinopia</code></strong> 停止更新后，社区大佬fork了一份并更名为**<code>Verdaccio</code>**</li> <li><strong><code>cnpm.org</code></strong> 停止更新后，团队使用<code>TypeScript</code>重构并新建了**<code>cnpmcore</code>** 仓库，目前<code>star</code>数并不高</li></ul> <p>所以可选的开源方案并不多，目前最受社区欢迎的就**<code>Verdaccio</code><strong>，</strong><code>Nexus</code>** 两个</p> <ul><li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fverdaccio.org%2Fzh-CN%2F" target="_blank" rel="noopener noreferrer">Verdaccio中文官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.sonatype.com%2Fproducts%2Frepository-oss-download" target="_blank" rel="noopener noreferrer">Nexus下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><img src="https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219152948814.png" alt="image-20221219152948814"></p> <h4 id="收费方案"><a href="#收费方案" class="header-anchor">#</a> 收费方案</h4> <ul><li><code>JFrog Artifactory</code>号称是 &quot;最好的通用存储库管理器&quot;，支持<code>docker、npm、maven、pypi</code>等50多种仓库</li> <li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fjfrog.com%2Fartifactory%2F" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="五、为什么推荐verdaccio"><a href="#五、为什么推荐verdaccio" class="header-anchor">#</a> 五、为什么推荐<code>Verdaccio</code></h3> <blockquote><p><strong><code>verdaccio 6</code>已经在开发中，注意关注动态</strong></p></blockquote> <p>很多团队使用<code>Nexus</code>，原因是<code>Nexus</code>同时支持<code>Maven、npm</code>仓库</p> <p>从<code>npm</code>命令的角度二者差异不大，支持<code>npm</code>的多数命令，那为什么推荐<code>Verdaccio</code>呢？</p> <h4 id="npm命令"><a href="#npm命令" class="header-anchor">#</a> <code>npm</code>命令</h4> <blockquote><p>截止到<code>5.15.3</code>版<code>Verdaccio</code>支持以<code>npm</code>命令</p></blockquote> <table><thead><tr><th>功能</th> <th>命令</th> <th>是否支持</th></tr></thead> <tbody><tr><td>安装包</td> <td><code>npm install、npm upgrade</code></td> <td>✅</td></tr> <tr><td>发布包</td> <td><code>npm publish</code></td> <td>✅</td></tr> <tr><td>取消发布</td> <td><code>npm unpublish</code></td> <td>✅</td></tr> <tr><td>标记</td> <td><code>npm tag</code></td> <td>✅</td></tr> <tr><td>弃用</td> <td><code>npm deprecate</code></td> <td>✅</td></tr> <tr><td>注册用户</td> <td><code>npm adduser {newuser}</code></td> <td>✅</td></tr> <tr><td>令牌</td> <td><code>npm token</code></td> <td>✅</td></tr> <tr><td>转让包</td> <td></td> <td>❌</td></tr> <tr><td>搜索</td> <td><code>npm search</code></td> <td>✅</td></tr> <tr><td>ping</td> <td><code>npm ping</code></td> <td>✅</td></tr> <tr><td>加星</td> <td><code>npm star、npm unstar、npm stars</code></td> <td>✅</td></tr> <tr><td>审计</td> <td><code>npm audit</code></td> <td>✅</td></tr></tbody></table> <h4 id="理由1"><a href="#理由1" class="header-anchor">#</a> 理由1</h4> <p><img src="https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219153437821.png" alt="image-20221219153437821"></p> <p><strong>二者最大的差异在于<code>Web</code>界面上</strong></p> <ul><li><code>Verdaccio</code>显示了包名、描述、作者、版本、标签、更新时间、协议等信息，更接近<code>npm</code>官方界面</li> <li><code>Nexus</code>上的信息则少的多</li> <li>这是因为<code>Nexus</code>是一款综合仓库管理系统，不仅支持<code>npm</code>，还有<code>maven，pypi</code>等仓库，对包的信息处理就没有<code>Verdaccio</code>直观</li></ul> <p><img src="https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/Verdaccio-web.gif" alt=""></p> <p><strong><code>Verdaccio</code></strong></p> <ul><li>提供各类包管理器 <code>npm</code> <code>yarn</code> <code>pnpm</code> 的安装命令，一键复制</li> <li>直接将 <code>README.md</code> 渲染到页面上，不用再去<code>git</code>上翻<code>README</code></li> <li>查看依赖包，点击跳转到对应包的详情页</li> <li>历史版本</li> <li>上行链路，这就是前面说的 <strong>链接npm 仓库</strong>(图中没有配置<code>UPLINKS</code>)</li> <li>右上角包括仓库信息、登录，还有夜间模式等</li></ul> <p><img src="https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/Verdaccio-Search.gif" alt=""></p> <p><strong><code>Nexus</code></strong></p> <ul><li><code>Nexus</code>需要先选版本再查看详情</li> <li><code>npm</code>包信息内容与<code>Verdaccio</code>不同，展现形式也完全不一样</li> <li><code>Nexus</code>像一个 “字典”，把所有重要信息罗列出来,<code>Verdaccio</code>像一个 “工具” ，用起来更顺手</li></ul> <h4 id="理由2"><a href="#理由2" class="header-anchor">#</a> 理由2</h4> <p><strong>安装简单</strong></p> <ul><li>支持<code>npm 、Docker</code>镜像、<code>Helm Chart</code>、<code>Cloudron</code>多种安装方式，一行命令即可安装</li></ul> <p><strong>身份验证</strong></p> <ul><li>内置账号注册，登录功能(默认使用<code>htpasswd</code>)，可通过插件扩展<code>LDAP</code>等验证方式</li></ul> <p><strong>权限控制</strong></p> <ul><li>根据需要允许和限制对某个包的访问、下载</li></ul> <p><strong>上行链路</strong></p> <ul><li>支持多个关联多个<code>npm</code>仓库</li></ul> <p><strong><code>Webhooks</code></strong></p> <ul><li>通过<code>npm publish</code> 发布包时，可发送通知</li></ul> <p><strong>日志</strong></p> <ul><li>详细的日志记录</li></ul> <p><strong>插件支持</strong></p> <p>官方支持<strong>认证、中间件、存储、主题</strong>，4种类型插件，可根据需求自己开发插件，官网提供了详细的开发文档</p> <h3 id="六、从零开始搭建"><a href="#六、从零开始搭建" class="header-anchor">#</a> 六、从零开始搭建</h3> <ul><li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fverdaccio.org%2Fzh-CN%2F" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fverdaccio%2Fverdaccio" target="_blank" rel="noopener noreferrer">github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fhub.docker.com%2Fr%2Fverdaccio%2Fverdaccio" target="_blank" rel="noopener noreferrer">dockerhub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="安装docker"><a href="#安装docker" class="header-anchor">#</a> 安装<code>docker</code></h4> <ul><li>使用<code>yum-utils</code>管理<code>yum</code>仓库</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 安装yum-utils</span>
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>添加<code>docker</code>的`yum源</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 添加docker-ce源</span>
yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
<span class="token comment"># 更新yum缓存</span>
yum <span class="token parameter variable">--enablerepo</span><span class="token operator">=</span>updates clean metadata
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>安装<code>docker docker-compose</code>并运行</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 安装</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> docker-ce docker-ce-cli <span class="token function">docker-compose</span>
<span class="token comment"># 启动</span>
systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span> <span class="token operator">&amp;&amp;</span> systemctl start <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>如果提示 找不到<code>docker-compose</code></p> <p>试试: 先执行 <code>yum -y install epel-release</code> 在执行安装命令</p></blockquote> <h4 id="配置docker镜像源"><a href="#配置docker镜像源" class="header-anchor">#</a> 配置docker镜像源</h4> <p>已经配置过的直接下一步</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># docker配置文件夹</span>
<span class="token function">mkdir</span> /etc/docker

<span class="token comment"># 编辑配置文件</span>
<span class="token comment">## 修改 registry-mirrors 和 dns 配置</span>
<span class="token function">cat</span> <span class="token operator">&gt;</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;</span><span class="token string">EOF
{
  &quot;registry-mirrors&quot;: [
    &quot;https://docker.mirrors.ustc.edu.cn&quot;,
    &quot;https://hub-mirror.c.163.com&quot;,
    &quot;https://reg-mirror.qiniu.com&quot;
  ],
  &quot;dns&quot;: [&quot;114.114.114.114&quot;,&quot;8.8.8.8&quot;]
}
EOF</span>

<span class="token comment"># 重启docker</span>
<span class="token comment">## 重启配置</span>
systemctl daemon-reload

<span class="token comment">## 重启docker</span>
systemctl restart <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="verdaccio容器配置"><a href="#verdaccio容器配置" class="header-anchor">#</a> <code>Verdaccio</code>容器配置</h4> <p>安装共需要3个文件</p> <ul><li><code>docker-compose.yaml docker</code>容器配置</li> <li><code>config.yaml</code> <code>verdaccio配置文件</code></li> <li><code>htpasswd</code>用户密码文件</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 数据目录结构</span>

└── /data/verdaccio <span class="token comment"># 项目目录</span>
   ├──/conf 配置目录
   │  └── config.yaml <span class="token comment"># verdaccio 配置文件</span>
   │  └── htpasswd <span class="token comment"># 用户密码文件</span>
   │
   ├──/storage <span class="token comment"># 包存放目录</span>
   │
   └──/plugins <span class="token comment"># 插件目录</span>

    docker-compose.yaml <span class="token comment"># docker-compose 配置文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>1.首先创建**<code>docker-compose.yaml</code>**文件</p> <blockquote><p><code>docker-compose</code>是定义和运行<code>docker</code>容器的工具，通过<code>.yaml</code>文件配置容器</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 创建目录</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-pv</span> /opt/scripts/verdaccio

<span class="token comment"># 创建yaml文件</span>
<span class="token function">cat</span> <span class="token operator">&gt;</span> /opt/scripts/verdaccio <span class="token operator">&lt;&lt;</span><span class="token string">EOF
version: '3.1'
services:
  verdaccio:
    image: verdaccio/verdaccio:5.18
    container_name: &quot;verdaccio&quot;
    hostname: jenkins
    restart: always
    privileged: true
    environment:
      - VERDACCIO_PORT=4873
      - TZ=&quot;Asia/Shanghai&quot;
    ports:
      - &quot;4873:4873&quot;
    volumes:
      - &quot;/data/verdaccio/storage:/verdaccio/storage&quot;
      - &quot;/data/verdaccio/conf:/verdaccio/conf&quot;
      - &quot;/data/verdaccio/plugins:/verdaccio/plugins&quot;
EOF</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><ul><li><code>version</code>: <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdocs.docker.com%2Fcompose%2Fcompose-file%2Fcompose-file-v3%2F" target="_blank" rel="noopener noreferrer">docker对应版本号<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>image</code>: <code>verdccio</code>镜像</li> <li>三个 <code>4873</code> 是<code>verdaccio</code>访问端口号</li> <li><code>volumes</code>: 是挂载物理机的目录到<code>docker</code>中
<ul><li>第一行: 存储目录，用于保存<code>npm</code>包</li> <li>第二行: 配置文件目录，下一节 <strong><code>Verdaccio</code>配置</strong> 会讲解</li> <li>第三行: 插件目录</li></ul></li></ul> <h4 id="htpasswd配置"><a href="#htpasswd配置" class="header-anchor">#</a> <code>htpasswd</code>配置</h4> <ul><li><a href="https://hostingcanada.org/htpasswd-generator/" target="_blank" rel="noopener noreferrer">htpasswd辅助工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 安装依赖工具</span>
yum <span class="token function">install</span> apache2-utils httpd <span class="token parameter variable">-y</span>


<span class="token comment"># 创建账户</span>
<span class="token comment">## -n:Don't update file; display results on stdout //不更新文件；在标准输出上显示结果</span>
<span class="token comment">## -b:Use the password from the command line //从命令行使用密码</span>
<span class="token comment">## -m:Force MD5 encryption of the password //强制对密码进行MD5加密</span>
$ htpasswd <span class="token parameter variable">-nbm</span> admin hhrR@WJbw@Y5dUVnJcYwaJUJ5teR9nn
admin:<span class="token variable">$apr1</span><span class="token variable">$5YfRsb5f</span><span class="token variable">$ADC8LIX3nRxfh</span>/wdjtq.w/

<span class="token comment"># 命令行上会打印出对应的加密后的账户信息&quot;admin:$apr1$wYbiTV5U$ZdhMVrmkUmFHOik1wJqdx.&quot;，将其写到/data/verdaccio/conf/htpasswd中</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;admin:\<span class="token variable">$apr1</span>\<span class="token variable">$wYbiTV5U</span>\<span class="token variable">$ZdhMVrmkUmFHOik1wJqdx</span>.&quot;</span> <span class="token operator">&gt;</span> /data/verdaccio/conf/htpasswd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="verdaccio配置"><a href="#verdaccio配置" class="header-anchor">#</a> <code>Verdaccio</code>配置</h4> <p>官网配置文档: <a href="https://link.juejin.cn/?target=https%3A%2F%2Fverdaccio.org%2Fzh-cn%2Fdocs%2Fconfiguration%2F" target="_blank" rel="noopener noreferrer">verdaccio.org/zh-cn/docs/…<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><p>创建配置文件<code>config.yaml</code></p> <blockquote><p><code>Verdaccio</code>的配置文件，上行链路、插件、密码文件位置等等参数都通过 <code>config.yaml</code> 配置</p></blockquote></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">cat</span> <span class="token operator">&gt;</span> /data/verdaccio/conf/config.yaml <span class="token operator">&lt;&lt;</span><span class="token string">EOF
# npm包缓存目录
storage: /verdaccio/storage
# 插件目录
plugins: /verdaccio/plugins
# 密码文件
auth:
  htpasswd:
    file: /verdaccio/conf/htpasswd
# 上行链路
uplinks:
  npmjs:
    url: https://registry.npmjs.org
    timeout: 10s
    cache: false
  yarn:
    url: https://registry.yarnpkg.com
    timeout: 10s
    cache: false
  npmmirror:
    url: https://registry.npmmirror.com
packages:
  # 带@的包只能登录后发布
  &quot;@*/*&quot;:
    # 访问包的权限
    access: \<span class="token variable">$all</span>
    # 发布包的权限
    publish: \<span class="token variable">$authenticated</span>
    # 代理链
    proxy: npmjs npmmirror yarn
  # 普通包所有人都能发布
  &quot;**&quot;:
    access: \<span class="token variable">$all</span>
    publish: \<span class="token variable">$all</span>
    proxy: npmjs npmmirror yarn
middlewares:
  # 启用 npm audit
  audit:
    enabled: true
logs:
  - { type: stdout, format: pretty, level: http }
#监听端口
listen: 0.0.0.0:4873
# 解决前端域名访问无法获取到后端Verdaccio的js内容
i18n:
  web: en-US
EOF</span>

$ dos2unix /data/verdaccio/conf/config.yaml
$ <span class="token function">chmod</span> <span class="token parameter variable">-R</span>  0755 /data/verdaccio
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p>在<code>packages</code>中共有三种用户角色</p> <table><thead><tr><th>角色</th> <th>描述</th></tr></thead> <tbody><tr><td>$all</td> <td>所有用户</td></tr> <tr><td>$anonymous</td> <td>匿名用户</td></tr> <tr><td>$authenticated</td> <td>登录的用户</td></tr></tbody></table> <p>在<code>packages</code>中可以定义某个包的发布下载规则</p> <p>网站的标题、<code>Logo</code>等设置参考<code>github web</code>字段</p> <blockquote><p>官方默认配置文件: <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fverdaccio%2Fverdaccio%2Fblob%2F5.x%2Fconf%2Fdefault.yaml" target="_blank" rel="noopener noreferrer">github.com/verdaccio/v…<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><strong>配置文件错误</strong></p> <ul><li><p><a href="https://github.com/verdaccio/verdaccio/issues/1779" target="_blank" rel="noopener noreferrer"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>状态如下</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 前端访问日志输出</span>
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">172.31</span>.228.152 requested <span class="token string">'GET /'</span>
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">200</span>, user: null<span class="token punctuation">(</span><span class="token number">170.178</span>.169.99 via <span class="token number">172.31</span>.228.152<span class="token punctuation">)</span>, req: <span class="token string">'GET /'</span>, bytes: <span class="token number">0</span>/0
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">172.31</span>.228.152 requested <span class="token string">'GET /'</span>
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">200</span>, user: null<span class="token punctuation">(</span><span class="token number">170.178</span>.169.99 via <span class="token number">172.31</span>.228.152<span class="token punctuation">)</span>, req: <span class="token string">'GET /'</span>, bytes: <span class="token number">0</span>/0
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">172.31</span>.228.152 requested <span class="token string">'GET /'</span>
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">200</span>, user: null<span class="token punctuation">(</span><span class="token number">170.178</span>.169.99 via <span class="token number">172.31</span>.228.152<span class="token punctuation">)</span>, req: <span class="token string">'GET /'</span>, bytes: <span class="token number">0</span>/0
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">172.31</span>.228.152 requested <span class="token string">'GET /'</span>
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">200</span>, user: null<span class="token punctuation">(</span><span class="token number">170.178</span>.169.99 via <span class="token number">172.31</span>.228.152<span class="token punctuation">)</span>, req: <span class="token string">'GET /'</span>, bytes: <span class="token number">0</span>/0
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">172.31</span>.228.152 requested <span class="token string">'GET /'</span>
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">200</span>, user: null<span class="token punctuation">(</span><span class="token number">170.178</span>.169.99 via <span class="token number">172.31</span>.228.152<span class="token punctuation">)</span>, req: <span class="token string">'GET /'</span>, bytes: <span class="token number">0</span>/0
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">172.31</span>.228.152 requested <span class="token string">'GET /'</span>
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">200</span>, user: null<span class="token punctuation">(</span><span class="token number">170.178</span>.169.99 via <span class="token number">172.31</span>.228.152<span class="token punctuation">)</span>, req: <span class="token string">'GET /'</span>, bytes: <span class="token number">0</span>/0
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">172.31</span>.228.152 requested <span class="token string">'GET /'</span>
verdaccio  <span class="token operator">|</span>  http --- <span class="token number">200</span>, user: null<span class="token punctuation">(</span><span class="token number">170.178</span>.169.99 via <span class="token number">172.31</span>.228.152<span class="token punctuation">)</span>, req: <span class="token string">'GET /'</span>, bytes: <span class="token number">0</span>/0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li> <li><p>前端域名访问无法获取到<code>Verdaccio</code>后端的<code>JS</code>文件</p> <p><img src="https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219174654320.png" alt="image-20221219174654320"></p></li></ul> <h4 id="创建容器并启动"><a href="#创建容器并启动" class="header-anchor">#</a> 创建容器并启动</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 进入verdaccio目录</span>
<span class="token builtin class-name">cd</span> /verdaccio

<span class="token comment"># 执行以下命令</span>
<span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
<span class="token function">docker-compose</span> logs <span class="token parameter variable">--tail</span> <span class="token number">100</span> <span class="token parameter variable">-f</span> 
<span class="token function">docker-compose</span> <span class="token function">ps</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="nginx代理verdaccio"><a href="#nginx代理verdaccio" class="header-anchor">#</a> <code>Nginx</code>代理<code>Verdaccio</code></h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">vim</span> /etc/nginx/conf.d/verdaccio.com.conf 
server <span class="token punctuation">{</span>
    charset utf-8<span class="token punctuation">;</span>
    listen <span class="token number">80</span><span class="token punctuation">;</span>
    server_name verdaccio.chsaos.com<span class="token punctuation">;</span>

    location / <span class="token punctuation">{</span>
        rewrite ^<span class="token punctuation">(</span>.*<span class="token punctuation">)</span> https://<span class="token variable">$host</span><span class="token variable">$1</span> permanent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 

server <span class="token punctuation">{</span>
    listen                  <span class="token number">443</span> ssl http2<span class="token punctuation">;</span>
    server_name             verdaccio.chsaos.com<span class="token punctuation">;</span>

    ssl_certificate         ssl/chsaos.com.crt<span class="token punctuation">;</span>
    ssl_certificate_key     ssl/chsaos.com.key<span class="token punctuation">;</span>

    ssl_session_cache       shared:SSL:10m<span class="token punctuation">;</span>
    ssl_session_timeout     10m<span class="token punctuation">;</span>

    ssl_prefer_server_ciphers on<span class="token punctuation">;</span>
    ssl_dhparam 			ssl/dhparam.pem<span class="token punctuation">;</span>
    ssl_protocols           TLSv1 TLSv1.1 TLSv1.2<span class="token punctuation">;</span>
    ssl_ciphers     EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:<span class="token operator">!</span>MD5<span class="token punctuation">;</span>

    add_header Strict-Transport-Security <span class="token string">&quot;max-age=31536000; includeSubDomains; preload&quot;</span> always<span class="token punctuation">;</span>
    add_header X-Frame-Options DENY<span class="token punctuation">;</span>
    add_header X-Content-Type-Options nosniff<span class="token punctuation">;</span>
    add_header X-Xss-Protection <span class="token number">1</span><span class="token punctuation">;</span>

    location / <span class="token punctuation">{</span>
      proxy_pass          http://172.31.228.152:4873/<span class="token punctuation">;</span>
      proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span>
      proxy_set_header X-Forwarded-Proto <span class="token variable">$scheme</span><span class="token punctuation">;</span>
      proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
      proxy_set_header X-NginX-Proxy <span class="token boolean">true</span><span class="token punctuation">;</span>
      proxy_ssl_session_reuse off<span class="token punctuation">;</span>
      proxy_set_header Host <span class="token variable">$http_host</span><span class="token punctuation">;</span>
      proxy_redirect off<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

nginx <span class="token parameter variable">-t</span>
nginx <span class="token parameter variable">-s</span> reload
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><blockquote><p>访问地址: <code>https://verdaccio.chsaos.com/</code></p></blockquote> <p><img src="https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219175110834.png" alt="image-20221219175110834"></p> <h3 id="七、使用verdaccio"><a href="#七、使用verdaccio" class="header-anchor">#</a> 七、使用<code>Verdaccio</code></h3> <h4 id="npm命令-2"><a href="#npm命令-2" class="header-anchor">#</a> <code>npm</code>命令</h4> <h5 id="配置私服地址"><a href="#配置私服地址" class="header-anchor">#</a> 配置私服地址</h5> <ul><li>把私服地址配置到项目的<code>.npmrc</code>即可</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>registry<span class="token operator">=</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">verdaccio.chsaos.com</span><span class="token regex-delimiter">/</span></span>

npm <span class="token keyword">set</span> registry https<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">verdaccio.chsaos.com</span><span class="token regex-delimiter">/</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="登录账户"><a href="#登录账户" class="header-anchor">#</a> 登录账户</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ <span class="token function">npm</span> login <span class="token parameter variable">--registry</span> https://verdaccio.chsaos.com/
Username: 注册的用户名；<span class="token punctuation">(</span>注册用户名不能重复<span class="token punctuation">)</span>
Password: 设置密码；
Email: 注册邮箱；<span class="token punctuation">(</span>注册邮箱不能重复<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="注册用户"><a href="#注册用户" class="header-anchor">#</a> 注册用户</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ <span class="token function">npm</span> adduser <span class="token parameter variable">--registry</span> https://verdaccio.chsaos.com/
Username: 注册的用户名；<span class="token punctuation">(</span>注册用户名不能重复<span class="token punctuation">)</span>
Password: 设置密码；
Email: 注册邮箱；<span class="token punctuation">(</span>注册邮箱不能重复<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="初始化项目"><a href="#初始化项目" class="header-anchor">#</a> 初始化项目</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>这里提示输入:</strong></p> <ul><li><code>name:</code>填写个包的名字，默认是这个文件夹的名字(<code>npm</code>有同名的包会报错);</li> <li><code>version:</code>包的版本，默认是<code>1.0.0</code>;</li> <li><code>description:</code> 要封装的包的简单介绍;</li> <li><code>entry point:</code> 入口文件，默认是<code>index.js</code>,也可以是其它名字;</li> <li><code>test command:</code> 测试命令，直接回车;</li> <li><code>git repository:</code> 这个是<code>git</code>仓库地址，如果你的包是先放到<code>github</code>上或者其他git仓库里，这时候你的文件夹里面会存在一个隐藏的<code>.git</code>目录,<code>npm</code>会读到这个目录作为这一项的默认值。如果没有的话，直接回车继续;</li> <li><code>keyword:</code>作为这个包的索引的关键字;</li> <li><code>author:</code> 作者名或账号;</li> <li><code>license:</code> 许可证, 没有就直接回车;</li></ul> <h5 id="发布包"><a href="#发布包" class="header-anchor">#</a> 发布包</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> publish <span class="token parameter variable">--registry</span> https://verdaccio.chsaos.com/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="下载项目"><a href="#下载项目" class="header-anchor">#</a> 下载项目</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> 包名 <span class="token parameter variable">--registry</span> https://verdaccio.chsaos.com/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="常用npm命令"><a href="#常用npm命令" class="header-anchor">#</a> 常用<code>npm</code>命令</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看 npm 的版本 </span>
<span class="token function">npm</span> <span class="token parameter variable">-v</span> 

<span class="token comment"># 查看各个命令的简单用法</span>
<span class="token function">npm</span> <span class="token parameter variable">-l</span> 
 
<span class="token comment"># 查看 npm 命令列表</span>
<span class="token function">npm</span> <span class="token builtin class-name">help</span>

<span class="token comment"># 查看 npm 的配置</span>
<span class="token function">npm</span> config list <span class="token parameter variable">-l</span>

<span class="token comment"># 初始化模块</span>
<span class="token function">npm</span> init

<span class="token comment"># 设置环境变量</span>
<span class="token function">npm</span> <span class="token builtin class-name">set</span> 

<span class="token comment"># npm search 搜索模块</span>
<span class="token function">npm</span> search <span class="token operator">&lt;</span>搜索词<span class="token operator">&gt;</span> <span class="token punctuation">[</span>-g<span class="token punctuation">]</span>
<span class="token function">npm</span> search命令用于搜索npm仓库，它后面可以跟字符串，也可以跟正则表达式。

<span class="token comment"># 查看模块</span>
<span class="token function">npm</span> list 

<span class="token comment"># 列出全局安装的模块 带上[--depth 0] 不深入到包的支点 更简洁</span>
<span class="token function">npm</span> list <span class="token parameter variable">-g</span> <span class="token parameter variable">--depth</span> <span class="token number">0</span>

<span class="token comment"># 安装模块</span>
<span class="token function">npm</span> <span class="token function">install</span>

<span class="token comment"># 默认安装指定模块的最新(@latest)版本</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>@scope<span class="token operator">&gt;</span>/<span class="token punctuation">]</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> 
例如：npm <span class="token function">install</span> <span class="token builtin class-name">test</span>

<span class="token comment"># 安装指定模块的指定版本</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>@scope<span class="token operator">&gt;</span>/<span class="token punctuation">]</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>
例如：npm <span class="token function">install</span> test@3.9.1

<span class="token comment"># 安装指定指定版本范围内的模块</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>@scope<span class="token operator">&gt;</span>/<span class="token punctuation">]</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>version range<span class="token operator">&gt;</span>
例如：npm <span class="token function">install</span> test@<span class="token string">&quot;&gt;=1.0.28 &lt; 2.0.0&quot;</span>

<span class="token comment"># 卸载当前项目或全局模块 </span>
<span class="token function">npm</span> uninstall <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> <span class="token punctuation">[</span>-g<span class="token punctuation">]</span> 
例如: <span class="token function">npm</span> uninstall <span class="token builtin class-name">test</span> --save-dev  
     <span class="token function">npm</span> i <span class="token builtin class-name">test</span> <span class="token parameter variable">-g</span>
     
<span class="token comment"># 升级当前项目或全局的指定模块</span>
<span class="token function">npm</span> update <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> <span class="token punctuation">[</span>-g<span class="token punctuation">]</span> 
例如: <span class="token function">npm</span> update express 
     <span class="token function">npm</span> update express <span class="token parameter variable">-g</span>

<span class="token comment"># 引用依赖 有些包是全局安装了，在项目里面只需要引用即可。</span>
<span class="token function">npm</span> <span class="token function">link</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>@scope<span class="token operator">&gt;</span>/<span class="token punctuation">]</span><span class="token operator">&lt;</span>pkg<span class="token operator">&gt;</span><span class="token punctuation">[</span>@<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token punctuation">]</span>
例如: 引用   <span class="token function">npm</span> <span class="token function">link</span> <span class="token builtin class-name">test</span> test-ssh test-ftp
例如: 解除引用 <span class="token function">npm</span> unlink <span class="token builtin class-name">test</span>

<span class="token comment"># 注册添加新用户</span>
<span class="token function">npm</span> adduser
//执行后 填写几个问题 Username、Password、Email

<span class="token comment">#已注册</span>
<span class="token function">npm</span> login 

<span class="token comment"># 发布模块</span>
<span class="token function">npm</span> publish <span class="token punctuation">(</span>必须先登录再发布<span class="token punctuation">)</span>

<span class="token comment"># 执行脚本</span>
<span class="token function">npm</span> run 

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h5 id="verdaccio命令安装"><a href="#verdaccio命令安装" class="header-anchor">#</a> <code>Verdaccio</code>命令安装</h5> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 全局安装verdaccio命令</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> verdaccio

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong><code>Windows</code>配置环境变量</strong></p> <blockquote><p><code>verdaccio_cli</code></p></blockquote> <p><img src="https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219181137015.png" alt="image-20221219181137015"></p> <p><img src="https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219181222584.png" alt="image-20221219181222584"></p> <p><img src="https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219181326009.png" alt="image-20221219181326009"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看版本信息</span>
$ verdaccio <span class="token parameter variable">--version</span>
v5.18.0                                                                                                         

<span class="token comment"># 查看命令帮助</span>
$ verdaccio <span class="token parameter variable">--help</span>
Launch the server

━━━ Usage ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

$ C:<span class="token punctuation">\</span>Program Files<span class="token punctuation">\</span>nodejs<span class="token punctuation">\</span>node.exe D:<span class="token punctuation">\</span>NodeJS<span class="token punctuation">\</span>node_global<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>verdaccio<span class="token punctuation">\</span>bin<span class="token punctuation">\</span>verdaccio

━━━ Options ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  -l,--listen <span class="token comment">#0    host:port number to listen on (default: localhost:4873)</span>
  -c,--config <span class="token comment">#0    use this configuration file (default: ./config.yaml)</span>

━━━ Details ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

This start the registry <span class="token keyword">in</span> the default port.

When used without arguments, it:

- bootstrap the server at the port  <span class="token variable"><span class="token variable">`</span><span class="token number">4873</span><span class="token variable">`</span></span>

The optional arguments are:

- <span class="token variable"><span class="token variable">`</span><span class="token parameter variable">--listen</span><span class="token variable">`</span></span> to switch the default server port,

- <span class="token variable"><span class="token variable">`</span><span class="token parameter variable">--config</span><span class="token variable">`</span></span> to define a different configuration path location,

━━━ Examples ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Runs the server with the default configuration
  $ verdaccio

Runs the server <span class="token keyword">in</span> the port <span class="token number">5000</span>
  $ verdaccio <span class="token parameter variable">--listen</span> <span class="token number">5000</span>

Runs the server by using a different absolute location of the configuration <span class="token function">file</span>
  $ verdaccio <span class="token parameter variable">--config</span> /home/user/verdaccio/config.yaml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/04/09, 16:48:42</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/e6db53/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">NPM国内加速,修改镜像源</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/e6db53/" class="prev">NPM国内加速,修改镜像源</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/2e807e/"><div>
            AWS NAT-NetWork-Firwalld配置(一)
            <!----></div></a> <span class="date">04-09</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/856d88/"><div>
            AWS NAT-NetWork-Firwalld配置(二)
            <!----></div></a> <span class="date">04-09</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/d27d92/"><div>
            kubernetes部署minio对象存储
            <!----></div></a> <span class="date">01-18</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:526453770@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/banna2019" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2024
    <span>Bruce Tao Blog Space | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.8758b392.js" defer></script><script src="/assets/js/3.9d37e447.js" defer></script><script src="/assets/js/2.f0782796.js" defer></script><script src="/assets/js/198.9c3c0526.js" defer></script>
  </body>
</html>
