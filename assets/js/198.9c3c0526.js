(window.webpackJsonp=window.webpackJsonp||[]).push([[198],{531:function(s,a,t){"use strict";t.r(a);var n=t(4),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"一、搭建verdaccio-npm私服"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、搭建verdaccio-npm私服"}},[s._v("#")]),s._v(" 一、搭建"),a("code",[s._v("Verdaccio NPM")]),s._v("私服")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/verdaccio/verdaccio",target:"_blank",rel:"noopener noreferrer"}},[s._v("Verdaccio-GitHub地址"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://verdaccio.org/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Verdaccio-中文文档地址"),a("OutboundLink")],1)])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219151307229.png",alt:"image-20221219151307229"}})]),s._v(" "),a("h3",{attrs:{id:"二、npm私服是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、npm私服是什么"}},[s._v("#")]),s._v(" 二、"),a("code",[s._v("npm")]),s._v("私服是什么")]),s._v(" "),a("ul",[a("li",[s._v("在自己的服务器上部署一个支持发布、下载、版本管理等服务的npm仓库就是npm私服,也叫"),a("strong",[s._v("私有化部署npm")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219151327674.png",alt:"image-20221219151327674"}})]),s._v(" "),a("ul",[a("li",[a("p",[s._v("因为国内下载"),a("code",[s._v("npm")]),s._v("包特别慢甚至下载失败，所以安装完"),a("code",[s._v("node.js")]),s._v("还要设置镜像源，镜像源就属于私服的一种")]),s._v(" "),a("blockquote",[a("p",[s._v("镜像源: 是以一定频率定时同步`npm``官方仓库，以此代替官方仓库，提高包下载速度")])])])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry https://npmmirror.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("淘宝镜像源 "),a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fnpmmirror.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("npmmirror.com"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("腾讯镜像源 "),a("a",{attrs:{href:"https://link.juejin.cn/?target=http%3A%2F%2Fmirrors.cloud.tencent.com%2Fnpm%2F",target:"_blank",rel:"noopener noreferrer"}},[s._v("mirrors.cloud.tencent.com/npm/"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("华为镜像源 "),a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fmirrors.huaweicloud.com%2Frepository%2Fnpm%2F",target:"_blank",rel:"noopener noreferrer"}},[s._v("mirrors.huaweicloud.com/repository/…"),a("OutboundLink")],1)])]),s._v(" "),a("h4",{attrs:{id:"有了镜像源为什么还需要npm私服"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#有了镜像源为什么还需要npm私服"}},[s._v("#")]),s._v(" "),a("strong",[s._v("有了镜像源为什么还需要"),a("code",[s._v("npm")]),s._v("私服？")])]),s._v(" "),a("ul",[a("li",[s._v("1.镜像源解决了国内下载速度的问题，但是不能发包")]),s._v(" "),a("li",[s._v("2.私有组件库，又不希望在网上公开，如何管理代码？")]),s._v(" "),a("li",[s._v("3.在每个项目里复制一遍，但是当组件修改了代码，就需要重新复制一遍， 带来的维护成本太高")])]),s._v(" "),a("p",[a("strong",[s._v("此时就需要"),a("code",[s._v("npm")]),s._v("私服")])]),s._v(" "),a("h3",{attrs:{id:"三、npm私服有什么用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、npm私服有什么用"}},[s._v("#")]),s._v(" 三、"),a("code",[s._v("npm")]),s._v("私服有什么用")]),s._v(" "),a("h4",{attrs:{id:"发布私有包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布私有包"}},[s._v("#")]),s._v(" 发布私有包")]),s._v(" "),a("ul",[a("li",[s._v("私服最重要的功能就是发布私有包，既能保证代码不公开又能享受"),a("code",[s._v("npm")]),s._v("安装的快捷")])]),s._v(" "),a("p",[a("strong",[s._v("例如")])]),s._v(" "),a("ul",[a("li",[s._v("在开发中通常会把一些方法封装成 "),a("code",[s._v("utils.js")]),s._v("，在项目初始化时复制一份")]),s._v(" "),a("li",[s._v("有了私服后就可以发一个 "),a("code",[s._v("myUtils")]),s._v(" 包，然后通过 "),a("code",[s._v("npm install myUtils")]),s._v(" 来安装")]),s._v(" "),a("li",[s._v("通过修改版本号就能快速更新包")])]),s._v(" "),a("h4",{attrs:{id:"链接npm仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#链接npm仓库"}},[s._v("#")]),s._v(" 链接"),a("code",[s._v("npm")]),s._v("仓库")]),s._v(" "),a("p",[s._v("在一个项目中使用多个仓库下载包时，可以配置 "),a("code",[s._v(".npmrc")]),s._v(" 指定下载地址")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("vue")]),s._v(" 包从淘宝镜像源下载")]),s._v(" "),a("li",[a("code",[s._v("myUtils")]),s._v(" 包从私服下载")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(".npmrc"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v(" 需要配置两个包的下载地址，还要在 "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("package.json"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v(" 中将私有包 "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("myUtils"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v(" 加上组织名 "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("@sf/myUtils\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 淘宝镜像源")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("registry")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://npmmirror.com\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 私有源")]),s._v("\n@sf:registry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("blockquote",[a("p",[s._v("其他项目组有自己的仓库的情况下，又要用到它们的包，只好再次修改 "),a("code",[s._v(".npmrc")])])]),s._v(" "),a("p",[a("strong",[s._v("解决办法")])]),s._v(" "),a("ul",[a("li",[s._v("使用私服的仓库链接功能(上行链路)，就可以把多个仓库聚合成一个下载入口")]),s._v(" "),a("li",[s._v("上面的例子 "),a("code",[s._v(".npmrc")]),s._v(" 只需要配置一个私服的地址 "),a("code",[s._v("registry=http://...")])]),s._v(" "),a("li",[s._v("省事省力")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219152426755.png",alt:"image-20221219152426755"}})]),s._v(" "),a("h4",{attrs:{id:"提高下载速度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提高下载速度"}},[s._v("#")]),s._v(" 提高下载速度")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("通过私服下载的包会缓存到服务器中")])]),s._v(" "),a("li",[a("p",[s._v("下载同一个包(同组织/名/版本)时优先从缓存中读取，找不到再从镜像或官方仓库下载")]),s._v(" "),a("blockquote",[a("p",[s._v("缓存策略可配置存储空间大小，保存周期等")])])])]),s._v(" "),a("h3",{attrs:{id:"四、私服方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、私服方案"}},[s._v("#")]),s._v(" 四、私服方案")]),s._v(" "),a("h4",{attrs:{id:"开源免费"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开源免费"}},[s._v("#")]),s._v(" 开源免费")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("方案")]),s._v(" "),a("th",[s._v("支持仓库")]),s._v(" "),a("th",[s._v("star数")]),s._v(" "),a("th",[s._v("github")]),s._v(" "),a("th",[s._v("开发语言")]),s._v(" "),a("th",[s._v("更新频率")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[a("code",[s._v("Nexus")]),s._v("开源版")]),s._v(" "),a("td",[s._v("maven，npm，docker，pypi...")]),s._v(" "),a("td",[a("code",[s._v("1.2k")])]),s._v(" "),a("td",[a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fsonatype%2Fnexus-public",target:"_blank",rel:"noopener noreferrer"}},[s._v("nexus-public"),a("OutboundLink")],1)]),s._v(" "),a("td",[a("code",[s._v("Java")])]),s._v(" "),a("td",[s._v("高")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("Sinopia")])]),s._v(" "),a("td",[s._v("npm")]),s._v(" "),a("td",[a("code",[s._v("5.5k")])]),s._v(" "),a("td",[a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Frlidwka%2Fsinopia",target:"_blank",rel:"noopener noreferrer"}},[s._v("sinopia"),a("OutboundLink")],1)]),s._v(" "),a("td",[a("code",[s._v("JavaScript")])]),s._v(" "),a("td",[s._v("停止更新")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("Verdaccio")])]),s._v(" "),a("td",[s._v("npm")]),s._v(" "),a("td",[a("code",[s._v("13.7k")])]),s._v(" "),a("td",[a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fverdaccio%2Fverdaccio",target:"_blank",rel:"noopener noreferrer"}},[s._v("verdaccio"),a("OutboundLink")],1)]),s._v(" "),a("td",[a("code",[s._v("JavaScript")])]),s._v(" "),a("td",[s._v("高")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("cnpm.org")])]),s._v(" "),a("td",[s._v("npm")]),s._v(" "),a("td",[a("code",[s._v("3.6k")])]),s._v(" "),a("td",[a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fcnpm%2Fcnpmjs.org",target:"_blank",rel:"noopener noreferrer"}},[s._v("cnpmjs.org"),a("OutboundLink")],1)]),s._v(" "),a("td",[a("code",[s._v("JavaScript")])]),s._v(" "),a("td",[s._v("停止更新")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("cnpmcore")])]),s._v(" "),a("td",[s._v("npm")]),s._v(" "),a("td",[a("code",[s._v("< 500")])]),s._v(" "),a("td",[a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fcnpm%2Fcnpmcore",target:"_blank",rel:"noopener noreferrer"}},[s._v("cnpmcore"),a("OutboundLink")],1)]),s._v(" "),a("td",[a("code",[s._v("TypeScript")])]),s._v(" "),a("td",[s._v("高")])])])]),s._v(" "),a("ul",[a("li",[a("strong",[a("code",[s._v("Sinopia")])]),s._v(" 停止更新后，社区大佬fork了一份并更名为**"),a("code",[s._v("Verdaccio")]),s._v("**")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("cnpm.org")])]),s._v(" 停止更新后，团队使用"),a("code",[s._v("TypeScript")]),s._v("重构并新建了**"),a("code",[s._v("cnpmcore")]),s._v("** 仓库，目前"),a("code",[s._v("star")]),s._v("数并不高")])]),s._v(" "),a("p",[s._v("所以可选的开源方案并不多，目前最受社区欢迎的就**"),a("code",[s._v("Verdaccio")]),a("strong",[s._v("，")]),a("code",[s._v("Nexus")]),s._v("** 两个")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fverdaccio.org%2Fzh-CN%2F",target:"_blank",rel:"noopener noreferrer"}},[s._v("Verdaccio中文官网"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fwww.sonatype.com%2Fproducts%2Frepository-oss-download",target:"_blank",rel:"noopener noreferrer"}},[s._v("Nexus下载地址"),a("OutboundLink")],1)])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219152948814.png",alt:"image-20221219152948814"}})]),s._v(" "),a("h4",{attrs:{id:"收费方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#收费方案"}},[s._v("#")]),s._v(" 收费方案")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("JFrog Artifactory")]),s._v('号称是 "最好的通用存储库管理器"，支持'),a("code",[s._v("docker、npm、maven、pypi")]),s._v("等50多种仓库")]),s._v(" "),a("li",[a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fjfrog.com%2Fartifactory%2F",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"五、为什么推荐verdaccio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、为什么推荐verdaccio"}},[s._v("#")]),s._v(" 五、为什么推荐"),a("code",[s._v("Verdaccio")])]),s._v(" "),a("blockquote",[a("p",[a("strong",[a("code",[s._v("verdaccio 6")]),s._v("已经在开发中，注意关注动态")])])]),s._v(" "),a("p",[s._v("很多团队使用"),a("code",[s._v("Nexus")]),s._v("，原因是"),a("code",[s._v("Nexus")]),s._v("同时支持"),a("code",[s._v("Maven、npm")]),s._v("仓库")]),s._v(" "),a("p",[s._v("从"),a("code",[s._v("npm")]),s._v("命令的角度二者差异不大，支持"),a("code",[s._v("npm")]),s._v("的多数命令，那为什么推荐"),a("code",[s._v("Verdaccio")]),s._v("呢？")]),s._v(" "),a("h4",{attrs:{id:"npm命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm命令"}},[s._v("#")]),s._v(" "),a("code",[s._v("npm")]),s._v("命令")]),s._v(" "),a("blockquote",[a("p",[s._v("截止到"),a("code",[s._v("5.15.3")]),s._v("版"),a("code",[s._v("Verdaccio")]),s._v("支持以"),a("code",[s._v("npm")]),s._v("命令")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("功能")]),s._v(" "),a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("是否支持")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("安装包")]),s._v(" "),a("td",[a("code",[s._v("npm install、npm upgrade")])]),s._v(" "),a("td",[s._v("✅")])]),s._v(" "),a("tr",[a("td",[s._v("发布包")]),s._v(" "),a("td",[a("code",[s._v("npm publish")])]),s._v(" "),a("td",[s._v("✅")])]),s._v(" "),a("tr",[a("td",[s._v("取消发布")]),s._v(" "),a("td",[a("code",[s._v("npm unpublish")])]),s._v(" "),a("td",[s._v("✅")])]),s._v(" "),a("tr",[a("td",[s._v("标记")]),s._v(" "),a("td",[a("code",[s._v("npm tag")])]),s._v(" "),a("td",[s._v("✅")])]),s._v(" "),a("tr",[a("td",[s._v("弃用")]),s._v(" "),a("td",[a("code",[s._v("npm deprecate")])]),s._v(" "),a("td",[s._v("✅")])]),s._v(" "),a("tr",[a("td",[s._v("注册用户")]),s._v(" "),a("td",[a("code",[s._v("npm adduser {newuser}")])]),s._v(" "),a("td",[s._v("✅")])]),s._v(" "),a("tr",[a("td",[s._v("令牌")]),s._v(" "),a("td",[a("code",[s._v("npm token")])]),s._v(" "),a("td",[s._v("✅")])]),s._v(" "),a("tr",[a("td",[s._v("转让包")]),s._v(" "),a("td"),s._v(" "),a("td",[s._v("❌")])]),s._v(" "),a("tr",[a("td",[s._v("搜索")]),s._v(" "),a("td",[a("code",[s._v("npm search")])]),s._v(" "),a("td",[s._v("✅")])]),s._v(" "),a("tr",[a("td",[s._v("ping")]),s._v(" "),a("td",[a("code",[s._v("npm ping")])]),s._v(" "),a("td",[s._v("✅")])]),s._v(" "),a("tr",[a("td",[s._v("加星")]),s._v(" "),a("td",[a("code",[s._v("npm star、npm unstar、npm stars")])]),s._v(" "),a("td",[s._v("✅")])]),s._v(" "),a("tr",[a("td",[s._v("审计")]),s._v(" "),a("td",[a("code",[s._v("npm audit")])]),s._v(" "),a("td",[s._v("✅")])])])]),s._v(" "),a("h4",{attrs:{id:"理由1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理由1"}},[s._v("#")]),s._v(" 理由1")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219153437821.png",alt:"image-20221219153437821"}})]),s._v(" "),a("p",[a("strong",[s._v("二者最大的差异在于"),a("code",[s._v("Web")]),s._v("界面上")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("Verdaccio")]),s._v("显示了包名、描述、作者、版本、标签、更新时间、协议等信息，更接近"),a("code",[s._v("npm")]),s._v("官方界面")]),s._v(" "),a("li",[a("code",[s._v("Nexus")]),s._v("上的信息则少的多")]),s._v(" "),a("li",[s._v("这是因为"),a("code",[s._v("Nexus")]),s._v("是一款综合仓库管理系统，不仅支持"),a("code",[s._v("npm")]),s._v("，还有"),a("code",[s._v("maven，pypi")]),s._v("等仓库，对包的信息处理就没有"),a("code",[s._v("Verdaccio")]),s._v("直观")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/Verdaccio-web.gif",alt:""}})]),s._v(" "),a("p",[a("strong",[a("code",[s._v("Verdaccio")])])]),s._v(" "),a("ul",[a("li",[s._v("提供各类包管理器 "),a("code",[s._v("npm")]),s._v(" "),a("code",[s._v("yarn")]),s._v(" "),a("code",[s._v("pnpm")]),s._v(" 的安装命令，一键复制")]),s._v(" "),a("li",[s._v("直接将 "),a("code",[s._v("README.md")]),s._v(" 渲染到页面上，不用再去"),a("code",[s._v("git")]),s._v("上翻"),a("code",[s._v("README")])]),s._v(" "),a("li",[s._v("查看依赖包，点击跳转到对应包的详情页")]),s._v(" "),a("li",[s._v("历史版本")]),s._v(" "),a("li",[s._v("上行链路，这就是前面说的 "),a("strong",[s._v("链接npm 仓库")]),s._v("(图中没有配置"),a("code",[s._v("UPLINKS")]),s._v(")")]),s._v(" "),a("li",[s._v("右上角包括仓库信息、登录，还有夜间模式等")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/Verdaccio-Search.gif",alt:""}})]),s._v(" "),a("p",[a("strong",[a("code",[s._v("Nexus")])])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("Nexus")]),s._v("需要先选版本再查看详情")]),s._v(" "),a("li",[a("code",[s._v("npm")]),s._v("包信息内容与"),a("code",[s._v("Verdaccio")]),s._v("不同，展现形式也完全不一样")]),s._v(" "),a("li",[a("code",[s._v("Nexus")]),s._v("像一个 “字典”，把所有重要信息罗列出来,"),a("code",[s._v("Verdaccio")]),s._v("像一个 “工具” ，用起来更顺手")])]),s._v(" "),a("h4",{attrs:{id:"理由2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理由2"}},[s._v("#")]),s._v(" 理由2")]),s._v(" "),a("p",[a("strong",[s._v("安装简单")])]),s._v(" "),a("ul",[a("li",[s._v("支持"),a("code",[s._v("npm 、Docker")]),s._v("镜像、"),a("code",[s._v("Helm Chart")]),s._v("、"),a("code",[s._v("Cloudron")]),s._v("多种安装方式，一行命令即可安装")])]),s._v(" "),a("p",[a("strong",[s._v("身份验证")])]),s._v(" "),a("ul",[a("li",[s._v("内置账号注册，登录功能(默认使用"),a("code",[s._v("htpasswd")]),s._v(")，可通过插件扩展"),a("code",[s._v("LDAP")]),s._v("等验证方式")])]),s._v(" "),a("p",[a("strong",[s._v("权限控制")])]),s._v(" "),a("ul",[a("li",[s._v("根据需要允许和限制对某个包的访问、下载")])]),s._v(" "),a("p",[a("strong",[s._v("上行链路")])]),s._v(" "),a("ul",[a("li",[s._v("支持多个关联多个"),a("code",[s._v("npm")]),s._v("仓库")])]),s._v(" "),a("p",[a("strong",[a("code",[s._v("Webhooks")])])]),s._v(" "),a("ul",[a("li",[s._v("通过"),a("code",[s._v("npm publish")]),s._v(" 发布包时，可发送通知")])]),s._v(" "),a("p",[a("strong",[s._v("日志")])]),s._v(" "),a("ul",[a("li",[s._v("详细的日志记录")])]),s._v(" "),a("p",[a("strong",[s._v("插件支持")])]),s._v(" "),a("p",[s._v("官方支持"),a("strong",[s._v("认证、中间件、存储、主题")]),s._v("，4种类型插件，可根据需求自己开发插件，官网提供了详细的开发文档")]),s._v(" "),a("h3",{attrs:{id:"六、从零开始搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、从零开始搭建"}},[s._v("#")]),s._v(" 六、从零开始搭建")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fverdaccio.org%2Fzh-CN%2F",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fverdaccio%2Fverdaccio",target:"_blank",rel:"noopener noreferrer"}},[s._v("github"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fhub.docker.com%2Fr%2Fverdaccio%2Fverdaccio",target:"_blank",rel:"noopener noreferrer"}},[s._v("dockerhub"),a("OutboundLink")],1)])]),s._v(" "),a("h4",{attrs:{id:"安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[s._v("#")]),s._v(" 安装"),a("code",[s._v("docker")])]),s._v(" "),a("ul",[a("li",[s._v("使用"),a("code",[s._v("yum-utils")]),s._v("管理"),a("code",[s._v("yum")]),s._v("仓库")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装yum-utils")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" yum-utils\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("添加"),a("code",[s._v("docker")]),s._v("的`yum源")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加docker-ce源")]),s._v("\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新yum缓存")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--enablerepo")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("updates clean metadata\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("安装"),a("code",[s._v("docker docker-compose")]),s._v("并运行")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" systemctl start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("如果提示 找不到"),a("code",[s._v("docker-compose")])]),s._v(" "),a("p",[s._v("试试: 先执行 "),a("code",[s._v("yum -y install epel-release")]),s._v(" 在执行安装命令")])]),s._v(" "),a("h4",{attrs:{id:"配置docker镜像源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置docker镜像源"}},[s._v("#")]),s._v(" 配置docker镜像源")]),s._v(" "),a("p",[s._v("已经配置过的直接下一步")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker配置文件夹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /etc/docker\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑配置文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 修改 registry-mirrors 和 dns 配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/docker/daemon.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('EOF\n{\n  "registry-mirrors": [\n    "https://docker.mirrors.ustc.edu.cn",\n    "https://hub-mirror.c.163.com",\n    "https://reg-mirror.qiniu.com"\n  ],\n  "dns": ["114.114.114.114","8.8.8.8"]\n}\nEOF')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启docker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 重启配置")]),s._v("\nsystemctl daemon-reload\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 重启docker")]),s._v("\nsystemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("h4",{attrs:{id:"verdaccio容器配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#verdaccio容器配置"}},[s._v("#")]),s._v(" "),a("code",[s._v("Verdaccio")]),s._v("容器配置")]),s._v(" "),a("p",[s._v("安装共需要3个文件")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("docker-compose.yaml docker")]),s._v("容器配置")]),s._v(" "),a("li",[a("code",[s._v("config.yaml")]),s._v(" "),a("code",[s._v("verdaccio配置文件")])]),s._v(" "),a("li",[a("code",[s._v("htpasswd")]),s._v("用户密码文件")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据目录结构")]),s._v("\n\n└── /data/verdaccio "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目目录")]),s._v("\n   ├──/conf 配置目录\n   │  └── config.yaml "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# verdaccio 配置文件")]),s._v("\n   │  └── htpasswd "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户密码文件")]),s._v("\n   │\n   ├──/storage "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 包存放目录")]),s._v("\n   │\n   └──/plugins "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 插件目录")]),s._v("\n\n    docker-compose.yaml "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-compose 配置文件")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("1.首先创建**"),a("code",[s._v("docker-compose.yaml")]),s._v("**文件")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("docker-compose")]),s._v("是定义和运行"),a("code",[s._v("docker")]),s._v("容器的工具，通过"),a("code",[s._v(".yaml")]),s._v("文件配置容器")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-pv")]),s._v(" /opt/scripts/verdaccio\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建yaml文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /opt/scripts/verdaccio "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('EOF\nversion: \'3.1\'\nservices:\n  verdaccio:\n    image: verdaccio/verdaccio:5.18\n    container_name: "verdaccio"\n    hostname: jenkins\n    restart: always\n    privileged: true\n    environment:\n      - VERDACCIO_PORT=4873\n      - TZ="Asia/Shanghai"\n    ports:\n      - "4873:4873"\n    volumes:\n      - "/data/verdaccio/storage:/verdaccio/storage"\n      - "/data/verdaccio/conf:/verdaccio/conf"\n      - "/data/verdaccio/plugins:/verdaccio/plugins"\nEOF')]),s._v("\n\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("version")]),s._v(": "),a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fdocs.docker.com%2Fcompose%2Fcompose-file%2Fcompose-file-v3%2F",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker对应版本号"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("code",[s._v("image")]),s._v(": "),a("code",[s._v("verdccio")]),s._v("镜像")]),s._v(" "),a("li",[s._v("三个 "),a("code",[s._v("4873")]),s._v(" 是"),a("code",[s._v("verdaccio")]),s._v("访问端口号")]),s._v(" "),a("li",[a("code",[s._v("volumes")]),s._v(": 是挂载物理机的目录到"),a("code",[s._v("docker")]),s._v("中\n"),a("ul",[a("li",[s._v("第一行: 存储目录，用于保存"),a("code",[s._v("npm")]),s._v("包")]),s._v(" "),a("li",[s._v("第二行: 配置文件目录，下一节 "),a("strong",[a("code",[s._v("Verdaccio")]),s._v("配置")]),s._v(" 会讲解")]),s._v(" "),a("li",[s._v("第三行: 插件目录")])])])]),s._v(" "),a("h4",{attrs:{id:"htpasswd配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#htpasswd配置"}},[s._v("#")]),s._v(" "),a("code",[s._v("htpasswd")]),s._v("配置")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://hostingcanada.org/htpasswd-generator/",target:"_blank",rel:"noopener noreferrer"}},[s._v("htpasswd辅助工具"),a("OutboundLink")],1)])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖工具")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" apache2-utils httpd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建账户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -n:Don't update file; display results on stdout //不更新文件；在标准输出上显示结果")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -b:Use the password from the command line //从命令行使用密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## -m:Force MD5 encryption of the password //强制对密码进行MD5加密")]),s._v("\n$ htpasswd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-nbm")]),s._v(" admin hhrR@WJbw@Y5dUVnJcYwaJUJ5teR9nn\nadmin:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$apr1")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$5YfRsb5f")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ADC8LIX3nRxfh")]),s._v("/wdjtq.w/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 命令行上会打印出对应的加密后的账户信息"admin:$apr1$wYbiTV5U$ZdhMVrmkUmFHOik1wJqdx."，将其写到/data/verdaccio/conf/htpasswd中')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin:\\'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$apr1")]),s._v("\\"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$wYbiTV5U")]),s._v("\\"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ZdhMVrmkUmFHOik1wJqdx")]),s._v('."')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /data/verdaccio/conf/htpasswd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h4",{attrs:{id:"verdaccio配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#verdaccio配置"}},[s._v("#")]),s._v(" "),a("code",[s._v("Verdaccio")]),s._v("配置")]),s._v(" "),a("p",[s._v("官网配置文档: "),a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fverdaccio.org%2Fzh-cn%2Fdocs%2Fconfiguration%2F",target:"_blank",rel:"noopener noreferrer"}},[s._v("verdaccio.org/zh-cn/docs/…"),a("OutboundLink")],1)]),s._v(" "),a("ul",[a("li",[a("p",[s._v("创建配置文件"),a("code",[s._v("config.yaml")])]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("Verdaccio")]),s._v("的配置文件，上行链路、插件、密码文件位置等等参数都通过 "),a("code",[s._v("config.yaml")]),s._v(" 配置")])])])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /data/verdaccio/conf/config.yaml "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('EOF\n# npm包缓存目录\nstorage: /verdaccio/storage\n# 插件目录\nplugins: /verdaccio/plugins\n# 密码文件\nauth:\n  htpasswd:\n    file: /verdaccio/conf/htpasswd\n# 上行链路\nuplinks:\n  npmjs:\n    url: https://registry.npmjs.org\n    timeout: 10s\n    cache: false\n  yarn:\n    url: https://registry.yarnpkg.com\n    timeout: 10s\n    cache: false\n  npmmirror:\n    url: https://registry.npmmirror.com\npackages:\n  # 带@的包只能登录后发布\n  "@*/*":\n    # 访问包的权限\n    access: \\'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$all")]),s._v("\n    # 发布包的权限\n    publish: \\"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$authenticated")]),s._v('\n    # 代理链\n    proxy: npmjs npmmirror yarn\n  # 普通包所有人都能发布\n  "**":\n    access: \\'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$all")]),s._v("\n    publish: \\"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$all")]),s._v("\n    proxy: npmjs npmmirror yarn\nmiddlewares:\n  # 启用 npm audit\n  audit:\n    enabled: true\nlogs:\n  - { type: stdout, format: pretty, level: http }\n#监听端口\nlisten: 0.0.0.0:4873\n# 解决前端域名访问无法获取到后端Verdaccio的js内容\ni18n:\n  web: en-US\nEOF")]),s._v("\n\n$ dos2unix /data/verdaccio/conf/config.yaml\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-R")]),s._v("  0755 /data/verdaccio\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br")])]),a("p",[s._v("在"),a("code",[s._v("packages")]),s._v("中共有三种用户角色")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("角色")]),s._v(" "),a("th",[s._v("描述")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("$all")]),s._v(" "),a("td",[s._v("所有用户")])]),s._v(" "),a("tr",[a("td",[s._v("$anonymous")]),s._v(" "),a("td",[s._v("匿名用户")])]),s._v(" "),a("tr",[a("td",[s._v("$authenticated")]),s._v(" "),a("td",[s._v("登录的用户")])])])]),s._v(" "),a("p",[s._v("在"),a("code",[s._v("packages")]),s._v("中可以定义某个包的发布下载规则")]),s._v(" "),a("p",[s._v("网站的标题、"),a("code",[s._v("Logo")]),s._v("等设置参考"),a("code",[s._v("github web")]),s._v("字段")]),s._v(" "),a("blockquote",[a("p",[s._v("官方默认配置文件: "),a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fverdaccio%2Fverdaccio%2Fblob%2F5.x%2Fconf%2Fdefault.yaml",target:"_blank",rel:"noopener noreferrer"}},[s._v("github.com/verdaccio/v…"),a("OutboundLink")],1)])]),s._v(" "),a("p",[a("strong",[s._v("配置文件错误")])]),s._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://github.com/verdaccio/verdaccio/issues/1779",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[s._v("状态如下")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 前端访问日志输出")]),s._v("\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152 requested "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v("\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(", user: null"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("170.178")]),s._v(".169.99 via "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", req: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v(", bytes: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/0\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152 requested "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v("\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(", user: null"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("170.178")]),s._v(".169.99 via "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", req: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v(", bytes: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/0\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152 requested "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v("\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(", user: null"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("170.178")]),s._v(".169.99 via "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", req: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v(", bytes: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/0\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152 requested "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v("\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(", user: null"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("170.178")]),s._v(".169.99 via "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", req: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v(", bytes: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/0\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152 requested "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v("\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(", user: null"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("170.178")]),s._v(".169.99 via "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", req: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v(", bytes: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/0\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152 requested "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v("\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(", user: null"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("170.178")]),s._v(".169.99 via "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", req: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v(", bytes: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/0\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152 requested "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v("\nverdaccio  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  http --- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(", user: null"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("170.178")]),s._v(".169.99 via "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),s._v(".228.152"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", req: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET /'")]),s._v(", bytes: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("前端域名访问无法获取到"),a("code",[s._v("Verdaccio")]),s._v("后端的"),a("code",[s._v("JS")]),s._v("文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219174654320.png",alt:"image-20221219174654320"}})])])]),s._v(" "),a("h4",{attrs:{id:"创建容器并启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建容器并启动"}},[s._v("#")]),s._v(" 创建容器并启动")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入verdaccio目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /verdaccio\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行以下命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" up "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" logs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tail")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h4",{attrs:{id:"nginx代理verdaccio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx代理verdaccio"}},[s._v("#")]),s._v(" "),a("code",[s._v("Nginx")]),s._v("代理"),a("code",[s._v("Verdaccio")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/nginx/conf.d/verdaccio.com.conf \nserver "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    charset utf-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    listen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name verdaccio.chsaos.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        rewrite ^"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(".*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" https://"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" permanent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n\nserver "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen                  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" ssl http2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name             verdaccio.chsaos.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    ssl_certificate         ssl/chsaos.com.crt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ssl_certificate_key     ssl/chsaos.com.key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    ssl_session_cache       shared:SSL:10m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ssl_session_timeout     10m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    ssl_prefer_server_ciphers on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ssl_dhparam \t\t\tssl/dhparam.pem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ssl_protocols           TLSv1 TLSv1.1 TLSv1.2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ssl_ciphers     EECDH+CHACHA20:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("MD5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    add_header Strict-Transport-Security "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max-age=31536000; includeSubDomains; preload"')]),s._v(" always"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    add_header X-Frame-Options DENY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    add_header X-Content-Type-Options nosniff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    add_header X-Xss-Protection "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      proxy_pass          http://172.31.228.152:4873/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      proxy_set_header Host "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      proxy_set_header X-Forwarded-Proto "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$scheme")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      proxy_set_header X-Forwarded-For "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$proxy_add_x_forwarded_for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      proxy_set_header X-NginX-Proxy "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      proxy_ssl_session_reuse off"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      proxy_set_header Host "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      proxy_redirect off"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nnginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v("\nnginx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" reload\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br")])]),a("blockquote",[a("p",[s._v("访问地址: "),a("code",[s._v("https://verdaccio.chsaos.com/")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219175110834.png",alt:"image-20221219175110834"}})]),s._v(" "),a("h3",{attrs:{id:"七、使用verdaccio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七、使用verdaccio"}},[s._v("#")]),s._v(" 七、使用"),a("code",[s._v("Verdaccio")])]),s._v(" "),a("h4",{attrs:{id:"npm命令-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm命令-2"}},[s._v("#")]),s._v(" "),a("code",[s._v("npm")]),s._v("命令")]),s._v(" "),a("h5",{attrs:{id:"配置私服地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置私服地址"}},[s._v("#")]),s._v(" 配置私服地址")]),s._v(" "),a("ul",[a("li",[s._v("把私服地址配置到项目的"),a("code",[s._v(".npmrc")]),s._v("即可")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("registry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("verdaccio.chsaos.com")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),s._v("\n\nnpm "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" registry https"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("verdaccio.chsaos.com")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h5",{attrs:{id:"登录账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录账户"}},[s._v("#")]),s._v(" 登录账户")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--registry")]),s._v(" https://verdaccio.chsaos.com/\nUsername: 注册的用户名；"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("注册用户名不能重复"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPassword: 设置密码；\nEmail: 注册邮箱；"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("注册邮箱不能重复"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h5",{attrs:{id:"注册用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册用户"}},[s._v("#")]),s._v(" 注册用户")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--registry")]),s._v(" https://verdaccio.chsaos.com/\nUsername: 注册的用户名；"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("注册用户名不能重复"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPassword: 设置密码；\nEmail: 注册邮箱；"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("注册邮箱不能重复"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h5",{attrs:{id:"初始化项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化项目"}},[s._v("#")]),s._v(" 初始化项目")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("这里提示输入:")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("name:")]),s._v("填写个包的名字，默认是这个文件夹的名字("),a("code",[s._v("npm")]),s._v("有同名的包会报错);")]),s._v(" "),a("li",[a("code",[s._v("version:")]),s._v("包的版本，默认是"),a("code",[s._v("1.0.0")]),s._v(";")]),s._v(" "),a("li",[a("code",[s._v("description:")]),s._v(" 要封装的包的简单介绍;")]),s._v(" "),a("li",[a("code",[s._v("entry point:")]),s._v(" 入口文件，默认是"),a("code",[s._v("index.js")]),s._v(",也可以是其它名字;")]),s._v(" "),a("li",[a("code",[s._v("test command:")]),s._v(" 测试命令，直接回车;")]),s._v(" "),a("li",[a("code",[s._v("git repository:")]),s._v(" 这个是"),a("code",[s._v("git")]),s._v("仓库地址，如果你的包是先放到"),a("code",[s._v("github")]),s._v("上或者其他git仓库里，这时候你的文件夹里面会存在一个隐藏的"),a("code",[s._v(".git")]),s._v("目录,"),a("code",[s._v("npm")]),s._v("会读到这个目录作为这一项的默认值。如果没有的话，直接回车继续;")]),s._v(" "),a("li",[a("code",[s._v("keyword:")]),s._v("作为这个包的索引的关键字;")]),s._v(" "),a("li",[a("code",[s._v("author:")]),s._v(" 作者名或账号;")]),s._v(" "),a("li",[a("code",[s._v("license:")]),s._v(" 许可证, 没有就直接回车;")])]),s._v(" "),a("h5",{attrs:{id:"发布包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布包"}},[s._v("#")]),s._v(" 发布包")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--registry")]),s._v(" https://verdaccio.chsaos.com/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"下载项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载项目"}},[s._v("#")]),s._v(" 下载项目")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" 包名 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--registry")]),s._v(" https://verdaccio.chsaos.com/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"常用npm命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用npm命令"}},[s._v("#")]),s._v(" 常用"),a("code",[s._v("npm")]),s._v("命令")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 npm 的版本 ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看各个命令的简单用法")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" \n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 npm 命令列表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 npm 的配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config list "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置环境变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm search 搜索模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" search "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("搜索词"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-g"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" search命令用于搜索npm仓库，它后面可以跟字符串，也可以跟正则表达式。\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" list \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出全局安装的模块 带上[--depth 0] 不深入到包的支点 更简洁")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" list "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--depth")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认安装指定模块的最新(@latest)版本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("@scope"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n例如：npm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装指定模块的指定版本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("@scope"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n例如：npm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" test@3.9.1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装指定指定版本范围内的模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("@scope"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version range"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n例如：npm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" test@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('">=1.0.28 < 2.0.0"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 卸载当前项目或全局模块 ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" uninstall "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-g"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n例如: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" uninstall "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" --save-dev  \n     "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v("\n     \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 升级当前项目或全局的指定模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" update "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-g"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n例如: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" update express \n     "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" update express "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 引用依赖 有些包是全局安装了，在项目里面只需要引用即可。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("@scope"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("pkg"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n例如: 引用   "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" test-ssh test-ftp\n例如: 解除引用 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" unlink "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注册添加新用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser\n//执行后 填写几个问题 Username、Password、Email\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#已注册")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("必须先登录再发布"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行脚本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run \n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br")])]),a("h5",{attrs:{id:"verdaccio命令安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#verdaccio命令安装"}},[s._v("#")]),s._v(" "),a("code",[s._v("Verdaccio")]),s._v("命令安装")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局安装verdaccio命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" verdaccio\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[a("code",[s._v("Windows")]),s._v("配置环境变量")])]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("verdaccio_cli")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219181137015.png",alt:"image-20221219181137015"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219181222584.png",alt:"image-20221219181222584"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20221219181326009.png",alt:"image-20221219181326009"}})]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看版本信息")]),s._v("\n$ verdaccio "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\nv5.18.0                                                                                                         \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看命令帮助")]),s._v("\n$ verdaccio "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v("\nLaunch the server\n\n━━━ Usage ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n$ C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Program Files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("nodejs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("node.exe D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("NodeJS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("node_global"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("node_modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("verdaccio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("verdaccio\n\n━━━ Options ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n  -l,--listen "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0    host:port number to listen on (default: localhost:4873)")]),s._v("\n  -c,--config "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0    use this configuration file (default: ./config.yaml)")]),s._v("\n\n━━━ Details ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\nThis start the registry "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the default port.\n\nWhen used without arguments, it:\n\n- bootstrap the server at the port  "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4873")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\nThe optional arguments are:\n\n- "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--listen")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" to switch the default server port,\n\n- "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--config")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" to define a different configuration path location,\n\n━━━ Examples ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\nRuns the server with the default configuration\n  $ verdaccio\n\nRuns the server "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the port "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("\n  $ verdaccio "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--listen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("\n\nRuns the server by using a different absolute location of the configuration "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n  $ verdaccio "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--config")]),s._v(" /home/user/verdaccio/config.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);