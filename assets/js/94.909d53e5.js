(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{429:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"一、vpc及nat网关配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、vpc及nat网关配置"}},[s._v("#")]),s._v(" 一、"),t("code",[s._v("VPC")]),s._v("及"),t("code",[s._v("NAT")]),s._v("网关配置")]),s._v(" "),t("h3",{attrs:{id:"_1-1-vpc创建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-vpc创建"}},[s._v("#")]),s._v(" 1.1."),t("code",[s._v("VPC")]),s._v("创建")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407151003800.png",alt:"image-20240407151003800"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407151021636.png",alt:"image-20240407151021636"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407151043932.png",alt:"image-20240407151043932"}})]),s._v(" "),t("h4",{attrs:{id:"关联互联网网关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关联互联网网关"}},[s._v("#")]),s._v(" 关联互联网网关")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407152545910.png",alt:"image-20240407152545910"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407152631706.png",alt:"image-20240407152631706"}})]),s._v(" "),t("h3",{attrs:{id:"_1-2-创建子网"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-创建子网"}},[s._v("#")]),s._v(" 1.2.创建子网")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[s._v("子网名称")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("子网网段")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("备注")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("public-10-subnet")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("10.0.10.0/24")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("公共子网10网段")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("public-20-subnet")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("10.0.20.0/24")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("公共子网20网段")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("private-30-subnet")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("10.0.30.0/24")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("私有子网30网段")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("private-40-subnet")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("10.0.40.0/24")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("私有子网40网段")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("firewalld-50-subnet")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("10.0.50.0/24")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("net firewalld 50网段")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("firewalld-60-subnet")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("10.0.60.0/24")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("net firewalld 60网段")])])])]),s._v(" "),t("h3",{attrs:{id:"_1-3-创建路由表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-创建路由表"}},[s._v("#")]),s._v(" 1.3.创建路由表")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[s._v("路由表名称")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("管理子网")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("路由配置")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("备注")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("M10-Public-route")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("public-10-subnet、public-20-subnet")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("0.0.0.0/0  关联上 互联网网关"),t("br"),s._v("10.0.0.0/0  关联 local 本地路由")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("共有子网路由表")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("strong",[s._v("M10-private-route")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("private-30-subnet、private-40-subnet")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("0.0.0.0/0  关联上 NAT网关"),t("br"),s._v("10.0.0.0/0  关联 local 本地路由")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("私有子网路由表")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}}),s._v(" "),t("td",{staticStyle:{"text-align":"center"}}),s._v(" "),t("td",{staticStyle:{"text-align":"center"}}),s._v(" "),t("td",{staticStyle:{"text-align":"center"}})]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}}),s._v(" "),t("td",{staticStyle:{"text-align":"center"}}),s._v(" "),t("td",{staticStyle:{"text-align":"center"}}),s._v(" "),t("td",{staticStyle:{"text-align":"center"}})])])]),s._v(" "),t("h4",{attrs:{id:"m10-public-route"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#m10-public-route"}},[s._v("#")]),s._v(" "),t("strong",[s._v("M10-Public-route")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407152319001.png",alt:"image-20240407152319001"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407152332468.png",alt:"image-20240407152332468"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407152348640.png",alt:"image-20240407152348640"}})]),s._v(" "),t("h4",{attrs:{id:"m10-private-route"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#m10-private-route"}},[s._v("#")]),s._v(" "),t("strong",[s._v("M10-private-route")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407152215493.png",alt:"image-20240407152215493"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407152229446.png",alt:"image-20240407152229446"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407152245388.png",alt:"image-20240407152245388"}})]),s._v(" "),t("h3",{attrs:{id:"_1-4-创建nat网关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-创建nat网关"}},[s._v("#")]),s._v(" 1.4.创建"),t("code",[s._v("NAT")]),s._v("网关")]),s._v(" "),t("h4",{attrs:{id:"申请弹性ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#申请弹性ip"}},[s._v("#")]),s._v(" 申请弹性"),t("code",[s._v("IP")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407152814142.png",alt:"image-20240407152814142"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407152824786.png",alt:"image-20240407152824786"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407152848249.png",alt:"image-20240407152848249"}})]),s._v(" "),t("h4",{attrs:{id:"创建nat网关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建nat网关"}},[s._v("#")]),s._v(" 创建"),t("code",[s._v("NAT")]),s._v("网关")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407153140746.png",alt:"image-20240407153140746"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407153151861.png",alt:"image-20240407153151861"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407153350455.png",alt:"image-20240407153350455"}})]),s._v(" "),t("h2",{attrs:{id:"二、创建ec2测试nat网关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、创建ec2测试nat网关"}},[s._v("#")]),s._v(" 二、创建"),t("code",[s._v("EC2")]),s._v("测试"),t("code",[s._v("NAT")]),s._v("网关")]),s._v(" "),t("h3",{attrs:{id:"_2-1-创建安全组"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-创建安全组"}},[s._v("#")]),s._v(" 2.1.创建安全组")]),s._v(" "),t("h5",{attrs:{id:"m10-public-subnet-sg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#m10-public-subnet-sg"}},[s._v("#")]),s._v(" "),t("strong",[s._v("M10-public-subnet-sg")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407153821045.png",alt:"image-20240407153821045"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407153917203.png",alt:"image-20240407153917203"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407153930254.png",alt:"image-20240407153930254"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407154020193.png",alt:"image-20240407154020193"}})]),s._v(" "),t("h5",{attrs:{id:"m10-private-sg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#m10-private-sg"}},[s._v("#")]),s._v(" "),t("strong",[s._v("M10-private-sg")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407154134343.png",alt:"image-20240407154134343"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407154204534.png",alt:"image-20240407154204534"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407154249595.png",alt:"image-20240407154249595"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407154311377.png",alt:"image-20240407154311377"}})]),s._v(" "),t("h3",{attrs:{id:"_2-2-创建服务器连接key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-创建服务器连接key"}},[s._v("#")]),s._v(" 2.2.创建服务器连接"),t("code",[s._v("key")])]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("这里的"),t("code",[s._v("key")]),s._v("创建好了之后,会自动下载一分到本地电脑上.")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407154414202.png",alt:"image-20240407154414202"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407154426503.png",alt:"image-20240407154426503"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407154438818.png",alt:"image-20240407154438818"}})]),s._v(" "),t("h3",{attrs:{id:"_2-3-创建测试ec2服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-创建测试ec2服务器"}},[s._v("#")]),s._v(" 2.3.创建测试"),t("code",[s._v("EC2")]),s._v("服务器")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v('这里需要创建两台服务器,一台是放在"公共子网区域,并绑定有弹性'),t("code",[s._v("IP")]),s._v('";一台放在私有子网不提供公网'),t("code",[s._v("IP")])])]),s._v(" "),t("p",[t("strong",[s._v("这里是做测试使用,可以选择免费套餐系列服务器及"),t("code",[s._v("ami")]),s._v("资源")])])]),s._v(" "),t("h5",{attrs:{id:"ec2-public-test"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ec2-public-test"}},[s._v("#")]),s._v(" ec2-public-test")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407154857151.png",alt:"image-20240407154857151"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407154916755.png",alt:"image-20240407154916755"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407155018652.png",alt:"image-20240407155018652"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407155056664.png",alt:"image-20240407155056664"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407155120311.png",alt:"image-20240407155120311"}})]),s._v(" "),t("h6",{attrs:{id:"绑定公网ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#绑定公网ip"}},[s._v("#")]),s._v(" 绑定公网"),t("code",[s._v("IP")])]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("给"),t("code",[s._v("ec2-public-test")]),s._v("绑定弹性IP地址")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407155353661.png",alt:"image-20240407155353661"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407155405632.png",alt:"image-20240407155405632"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407155431015.png",alt:"image-20240407155431015"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407155453845.png",alt:"image-20240407155453845"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407155513478.png",alt:"image-20240407155513478"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407155613846.png",alt:"image-20240407155613846"}})]),s._v(" "),t("h6",{attrs:{id:"本地连接服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地连接服务器"}},[s._v("#")]),s._v(" 本地连接服务器")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("本地使用客户端进行连接")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407155852904.png",alt:"image-20240407155852904"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407155924040.png",alt:"image-20240407155924040"}})]),s._v(" "),t("h6",{attrs:{id:"手动创建ssh秘钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#手动创建ssh秘钥"}},[s._v("#")]),s._v(" 手动创建"),t("code",[s._v("ssh")]),s._v("秘钥")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("这个时候需要手动创建链接秘钥,然后再将镜像做一个"),t("code",[s._v("AMI")]),s._v("镜像快照,一会儿使用镜像快照在私有子网创建一台服务器;来测试公网"),t("code",[s._v("EC2")]),s._v("到私网"),t("code",[s._v("EC2")]),s._v(" 的"),t("code",[s._v("ssh")]),s._v("连接以及私网"),t("code",[s._v("EC2")]),s._v("通过"),t("code",[s._v("NAT")]),s._v("网关出外网访问")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 手动创建秘钥命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 一路回车即可")]),s._v("\nssh-keygen "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-C")]),s._v(" ec2-user "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" /root/.ssh/ec2-user.pem\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看创建好的秘钥")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ip-10-0-10-249 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -al .ssh/")]),s._v("\ntotal "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v("\ndrwx------. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("175")]),s._v(" Apr  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" 07:06 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndr-xr-x---. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("159")]),s._v(" Apr  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":53 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rw-------. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1290")]),s._v(" Apr  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" 07:03 authorized_keys\n-rw-------. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3369")]),s._v(" Apr  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":39 ec2-user.pem\n-rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("734")]),s._v(" Apr  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":39 ec2-user.pem.pub\n-rw-------. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("452")]),s._v(" Apr  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":51 id_ed25519\n-rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("133")]),s._v(" Apr  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":51 id_ed25519.pub\n-rw-------. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("889")]),s._v(" Apr  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" 07:06 known_hosts\n-rw-------. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("717")]),s._v(" Apr  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" 07:06 known_hosts.old\n-rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Apr  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":29 known_hosts2\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拷贝文件中的内容ec2-user.pem.pub,放入/home/ec2-user/.ssh/authorized_keys文件中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDfDrhV4LGsRZiWfGS/3FN6M8a4aiNJ0ELmPs6xlZH/j8q8y/Uy67QDmOj6KkHcVy/Sxvq0O0dC543JfLcDiWZUf5FKRHpV1p0FRjD1B4RwQsnFS+SD+AdtuF2yn/Tw1UelbMAfXXSdA90cY/ZFLk6lD/ud6Q/ewb+3hxqVHvbv4Wbv/QfQFXipdzSz8gT7ymVrCZX91Py8XfabxzWYTww8dIeVb1O+iSnMzv1yAE8lkyQnOUfD3xNPSydnMzw3bnkk3gWEb9tfFgh9HwXwtxKhqHfURowRNTtkVLX66i6CXqr03ERdtxcnxjDr3JMthUidUlNiwf8tcgI9w0tkaHQS2PUG6e6sWRvO+HRDWKYn7q0sugXbbfEBieRM/EDasLoBbx5AoUZo9li5Q19yU6fPImCpeRVpHYlchL4lTG9UzL453cl4xuYddJ2empGA69wYoxPpId91Kq8uvX3hLfq8oNp681F8thig7vLMo5x89lVJmRiNXlF0VgOARFRL477fujtDXLX2fyojj2VZGFLDdTUfOgrvCKFyLCHnFRmJx0WKBveym3IWvXZAH4/GuSk3wdeHVMuQDNMI27sNrSr+YF5R2T8Wb1ITLgdSLUj4Zbk++0GGkLnPAdRm6cwBXPZCd+PxOAQcu78X+je4oqrbg8CvCIy5bhjsCwN1GXvGoQ== ec2-user"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /home/ec2-user/.ssh/authorized_keys\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本地指定秘钥测试ssh链接")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" .ssh/ec2-user.pem  ec2-user@10.0.10.249\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407160610182.png",alt:"image-20240407160610182"}})]),s._v(" "),t("h6",{attrs:{id:"制作ami镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#制作ami镜像"}},[s._v("#")]),s._v(" 制作"),t("code",[s._v("AMI")]),s._v("镜像")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407160710837.png",alt:"image-20240407160710837"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407160746568.png",alt:"image-20240407160746568"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407160759030.png",alt:"image-20240407160759030"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407160907257.png",alt:"image-20240407160907257"}})]),s._v(" "),t("h5",{attrs:{id:"ec2-private-test"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ec2-private-test"}},[s._v("#")]),s._v(" ec2-private-test")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("私有子网测试"),t("code",[s._v("EC2")]),s._v("实例创建")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407161014815.png",alt:"image-20240407161014815"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407161119715.png",alt:"image-20240407161119715"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407161137192.png",alt:"image-20240407161137192"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407161230026.png",alt:"image-20240407161230026"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407161331671.png",alt:"image-20240407161331671"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407161428219.png",alt:"image-20240407161428219"}})]),s._v(" "),t("h4",{attrs:{id:"_2-4-nat测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-nat测试"}},[s._v("#")]),s._v(" 2.4."),t("code",[s._v("NAT")]),s._v("测试")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("这里要测试两个地方: 一个是通过带公网"),t("code",[s._v("IP")]),s._v("服务器"),t("code",[s._v("ssh")]),s._v("连接到私网服务器上;一个是使用私用服务器测试访问外部网站")])])]),s._v(" "),t("h5",{attrs:{id:"本地登录公网ip服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地登录公网ip服务器"}},[s._v("#")]),s._v(" 本地登录公网"),t("code",[s._v("IP")]),s._v("服务器")]),s._v(" "),t("blockquote",[t("p",[t("strong",[t("code",[s._v("ec2-public-test")]),s._v(" ---- 54.255.99.99")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407163114106.png",alt:"image-20240407163114106"}})]),s._v(" "),t("h5",{attrs:{id:"测试私网服务器ssh连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试私网服务器ssh连接"}},[s._v("#")]),s._v(" 测试私网服务器"),t("code",[s._v("ssh")]),s._v("连接")]),s._v(" "),t("blockquote",[t("p",[t("strong",[t("code",[s._v("ec2-private-test")]),s._v(" --- 10.0.30.22")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定链接秘钥")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" .ssh/ec2-user.pem  ec2-user@10.0.30.22\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407163338236.png",alt:"image-20240407163338236"}})]),s._v(" "),t("h5",{attrs:{id:"测试私网服务器访问外网"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试私网服务器访问外网"}},[s._v("#")]),s._v(" 测试私网服务器访问外网")]),s._v(" "),t("blockquote",[t("p",[s._v("服务器名称: "),t("code",[s._v("ec2-private-test")])]),s._v(" "),t("p",[s._v("内网"),t("code",[s._v("IP")]),s._v("： 10.0.30.22")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ping 外网测试")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ip-10-0-30-22 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ping google.com")]),s._v("\nPING google.com "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("142.251")]),s._v(".175.100"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from sh-in-f100.1e100.net "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("142.251")]),s._v(".175.100"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("55")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.39")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from sh-in-f100.1e100.net "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("142.251")]),s._v(".175.100"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("55")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.10")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from sh-in-f100.1e100.net "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("142.251")]),s._v(".175.100"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("55")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.06")]),s._v(" ms\n^C\n--- google.com "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" statistics ---\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" packets transmitted, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" received, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% packet loss, "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" 2003ms\nrtt min/avg/max/mdev "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.064")]),s._v("/2.184/2.391/0.146 ms\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 谷歌地址测试")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ip-10-0-30-22 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl -I https://google.com")]),s._v("\nHTTP/2 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("301")]),s._v(" \nlocation: https://www.google.com/\ncontent-type: text/html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("charset")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("UTF-8\ncontent-security-policy-report-only: object-src "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'none'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("base-uri "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'self'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("script-src "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nonce-SD4CYHqwKGOEhL_3Rb_Xqw'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'strict-dynamic'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'report-sample'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'unsafe-eval'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'unsafe-inline'")]),s._v(" https: http:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("report-uri https://csp.withgoogle.com/csp/gws/other-hp\ndate: Sun, 07 Apr "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v(" 08:35:45 GMT\nexpires: Tue, 07 May "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v(" 08:35:45 GMT\ncache-control: public, max-age"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2592000")]),s._v("\nserver: gws\ncontent-length: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("220")]),s._v("\nx-xss-protection: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nx-frame-options: SAMEORIGIN\nalt-svc: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("h3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('":443"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ma")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2592000")]),s._v(",h3-29"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('":443"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ma")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2592000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Telnet 80端口测试")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ip-10-0-30-22 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# telnet google.com 80")]),s._v("\nTrying "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("142.251")]),s._v(".175.138"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nConnected to google.com.\nEscape character is "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'^]'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\nquit\nHTTP/1.0 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v(" Bad Request\nContent-Type: text/html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("charset")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("UTF-8\nReferrer-Policy: no-referrer\nContent-Length: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1555")]),s._v("\nDate: Sun, 07 Apr "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v(" 08:35:54 GMT\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("DOCTYPE html"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("html "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lang")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("en"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("meta "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("charset")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf-"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("8")]),s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("meta "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("viewport "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("content")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"initial-scale=1, minimum-scale=1, width=device-width"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("title"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Error "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Bad Request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v("<")]),s._v("/title"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("style"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    *"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("margin:0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("padding:0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("html,code"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("font:15px/22px arial,sans-serif"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("background:"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/style"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("//www.google.com/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("span "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("logo aria-label"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Google"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/span"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("b"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("."),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/b"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("That’s an error."),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/ins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Your client has issued a malformed or illegal request.  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("That’s all we know."),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/ins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nConnection closed by foreign host.\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# telnet 443端口测试")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ip-10-0-30-22 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# telnet google.com 443")]),s._v("\nTrying "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("142.251")]),s._v(".175.113"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nConnected to google.com.\nEscape character is "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'^]'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\nquit\nFConnection closed by foreign host.\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ip-10-0-30-22 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br")])]),t("h5",{attrs:{id:"注意内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意内容"}},[s._v("#")]),s._v(" 注意内容")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("这里在本地测试了"),t("code",[s._v("NAT")]),s._v("网关的"),t("code",[s._v("IP")]),s._v("地址,从外部访问"),t("code",[s._v("NAT")]),s._v("网关的"),t("code",[s._v("IP")]),s._v("是否能成功")])]),s._v(" "),t("p",[t("strong",[t("code",[s._v("NAT GW IP:")]),s._v(" 52.221.177.42")])])]),s._v(" "),t("h6",{attrs:{id:"telnet端口测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#telnet端口测试"}},[s._v("#")]),s._v(" "),t("code",[s._v("telnet")]),s._v("端口测试")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("这里测试"),t("code",[s._v("telnet")]),s._v(" 22端口,发现是通的")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407181857081.png",alt:"image-20240407181857081"}})]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("客户端连接测试")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407182121951.png",alt:"image-20240407182121951"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407182324045.png",alt:"image-20240407182324045"}})]),s._v(" "),t("h6",{attrs:{id:"nginx服务测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx服务测试"}},[s._v("#")]),s._v(" "),t("code",[s._v("Nginx")]),s._v("服务测试")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("在私有子网中的"),t("code",[s._v("EC2")]),s._v("服务器上安装"),t("code",[s._v("nginx")]),s._v("服务,并启动服务测试")])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nginx "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\n\n$ system start nginx\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-nptl")]),s._v("\nActive Internet connections "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("only servers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:80              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5511")]),s._v("/nginx: master  \ntcp        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:22              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2145")]),s._v("/sshd: /usr/sbi \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::80                   :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5511")]),s._v("/nginx: master  \ntcp6       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" :::22                   :::*                    LISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2145")]),s._v("/sshd: /usr/sbi \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("blockquote",[t("p",[t("strong",[s._v("这里测试"),t("code",[s._v("telnet")]),s._v(" 80端口,发现是通的")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407182525813.png",alt:"image-20240407182525813"}})]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("当时本地浏览器以及"),t("code",[s._v("curl")]),s._v("是无法正常访问服务的")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407182755816.png",alt:"image-20240407182755816"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407182948201.png",alt:"image-20240407182948201"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407183000116.png",alt:"image-20240407183000116"}})]),s._v(" "),t("h6",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("上面的两个测试结得到的结果,和私有服务中设定的安全组;出口规则有关联,但是如果调整收缩规则;又会导致私网服务器无法正常出去外网")])]),s._v(" "),t("p",[t("strong",[s._v("目前来看,这种情况没有大碍")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bruce-log-img.oss-cn-shanghai.aliyuncs.com/image-20240407183309590.png",alt:"image-20240407183309590"}})])])}),[],!1,null,null,null);t.default=n.exports}}]);